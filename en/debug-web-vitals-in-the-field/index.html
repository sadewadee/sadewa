<!DOCTYPE html>
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.2, user-scalable=yes"><link media="all" href="https://sadewadee.pages.dev/contents/cache/autoptimize/css/autoptimize_7892b02b1052446ffd882bf786ecd529.css" rel="stylesheet"><title>Debug Web Vitals in the field | Dev Tech | Optin Labs</title><meta name="robots" content="max-image-preview:large"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="alternate" type="application/rss+xml" title="Dev Tech » Feed" href="https://sadewadee.pages.dev/en/feed/"><link rel="alternate" type="application/rss+xml" title="Dev Tech » Comments Feed" href="https://sadewadee.pages.dev/en/comments/feed/"><link rel="alternate" type="application/rss+xml" title="Dev Tech » Debug Web Vitals in the field Comments Feed" href="https://sadewadee.pages.dev/en/debug-web-vitals-in-the-field/feed/"><link rel="stylesheet" id="google-fonts-css" href="https://fonts.googleapis.com/css?family=Raleway%3A400%2C700%2C500%2C600%2C300%2C200%2C100%2C800%2C900%7CRoboto%3A400%2C700%2C400italic%2C500%2C500italic%2C300italic%2C300%2C100italic%2C100%2C700italic%2C900%2C900italic%7CKristi&amp;subset=latin%2Clatin-ext&amp;ver=1.0.0" type="text/css" media="all"> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/jquery/jquery.min.js?ver=3.6.0" id="jquery-core-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/jquery/jquery-migrate.min.js?ver=3.3.2" id="jquery-migrate-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/wp-automatic/js/main-front.js?ver=5.8.1" id="wp_automatic_gallery-js"></script>  <link rel="alternate" type="application/json" href="https://sadewadee.pages.dev/en/wp-json/wp/v2/posts/150"><link rel="alternate" type="application/json+oembed" href="https://sadewadee.pages.dev/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fsadewadee.pages.dev%2Fen%2Fdebug-web-vitals-in-the-field%2F"><link rel="alternate" type="text/xml+oembed" href="https://sadewadee.pages.dev/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fsadewadee.pages.dev%2Fen%2Fdebug-web-vitals-in-the-field%2F&amp;format=xml"><link rel="canonical" href="https://sadewadee.pages.dev/en/debug-web-vitals-in-the-field/"><meta name="description" content="Learn how to attribute your Web Vitals data with debug information to help you identify and fix real-user issues with analyticsApr 1, 2021• Updated Apr 1, 2021Google currently provides two categories of tools to measure and debug Web Vitals:Lab tools: Tools such as Lighthouse, where your page is ... | Your problem is our pleasure."> <script type="application/ld+json">{"@context":"https:\/\/schema.org","@graph":[{"@type":"WPHeader","url":"https:\/\/sadewadee.pages.dev\/en\/debug-web-vitals-in-the-field\/","headline":"Debug Web Vitals in the field | Dev Tech | Optin Labs","description":"Learn how to attribute your Web Vitals data with debug information to help you identify and fix real-user issues with analyticsApr 1, 2021\u2022 Updated Apr 1, 2021Google currently provides two categories of tools to measure and debug Web Vitals:Lab tools: Tools such as Lighthouse, where your page is ... | Your problem is our pleasure."},{"@type":"WPFooter","url":"https:\/\/sadewadee.pages.dev\/en\/debug-web-vitals-in-the-field\/","headline":"Debug Web Vitals in the field | Dev Tech | Optin Labs","description":"Learn how to attribute your Web Vitals data with debug information to help you identify and fix real-user issues with analyticsApr 1, 2021\u2022 Updated Apr 1, 2021Google currently provides two categories of tools to measure and debug Web Vitals:Lab tools: Tools such as Lighthouse, where your page is ... | Your problem is our pleasure.","copyrightYear":"2021"},{"@type":"Organization","@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization","url":"https:\/\/sadewadee.pages.dev","name":"Dev Tech"},{"@type":"WebSite","@id":"https:\/\/sadewadee.pages.dev\/#schema-website","url":"https:\/\/sadewadee.pages.dev","name":"Blog Teknologi Indonesia","encoding":"UTF-8","potentialAction":{"@type":"SearchAction","target":"https:\/\/sadewadee.pages.dev\/en\/search\/{search_term_string}\/","query-input":"required name=search_term_string"}},{"@type":"WebPage","@id":"https:\/\/sadewadee.pages.dev\/en\/debug-web-vitals-in-the-field\/#schema-webpage","isPartOf":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-website"},"publisher":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization"},"url":"https:\/\/sadewadee.pages.dev\/en\/debug-web-vitals-in-the-field\/"},{"@type":"Article","mainEntityOfPage":{"@id":"https:\/\/sadewadee.pages.dev\/en\/debug-web-vitals-in-the-field\/#schema-webpage"},"author":{"@type":"Person","@id":"https:\/\/sadewadee.pages.dev\/en\/author\/sadewadee\/#schema-author","name":"sadewadee","url":"https:\/\/sadewadee.pages.dev\/en\/author\/sadewadee\/"},"publisher":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization"},"dateModified":"2021-07-05T16:56:45","datePublished":"2021-07-05T16:56:45","headline":"Debug Web Vitals in the field | Dev Tech | Optin Labs","description":"Learn how to attribute your Web Vitals data with debug information to help you identify and fix real-user issues with analyticsApr 1, 2021\u2022 Updated Apr 1, 2021Google currently provides two categories of tools to measure and debug Web Vitals:Lab tools: Tools such as Lighthouse, where your page is ... | Your problem is our pleasure.","name":"Debug Web Vitals in the field"}]}</script> <meta property="og:type" content="article"><meta property="og:url" content="https://sadewadee.pages.dev/en/debug-web-vitals-in-the-field/"><meta property="og:title" content="Debug Web Vitals in the field | Dev Tech | Optin Labs"><meta property="og:description" content="Learn how to attribute your Web Vitals data with debug information to help you identify and fix real-user issues with analyticsApr 1, 2021• Updated Apr 1, 2021Google currently provides two categories of tools to measure and debug Web Vitals:Lab tools: Tools such as Lighthouse, where your page is ... | Your problem is our pleasure."><meta property="og:image" content="https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?auto=format&amp;fit=crop&amp;h=64&amp;w=64"><meta property="article:published_time" content="2021-07-05T16:56:45"><meta property="article:author" content="sadewadee"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Debug Web Vitals in the field | Dev Tech | Optin Labs"><meta name="twitter:description" content="Learn how to attribute your Web Vitals data with debug information to help you identify and fix real-user issues with analyticsApr 1, 2021• Updated Apr 1, 2021Google currently provides two categories of tools to measure and debug Web Vitals:Lab tools: Tools such as Lighthouse, where your page is ... | Your problem is our pleasure."><meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?auto=format&amp;fit=crop&amp;h=64&amp;w=64"><link rel="alternate" hreflang="en-US" href="https://sadewadee.pages.dev/en/debug-web-vitals-in-the-field/"><link rel="alternate" hreflang="en" href="https://sadewadee.pages.dev/en/debug-web-vitals-in-the-field/"><link rel="alternate" hreflang="id-ID" href="https://sadewadee.pages.dev/id/debug-web-vitals-in-the-field/"><link rel="alternate" hreflang="id" href="https://sadewadee.pages.dev/id/debug-web-vitals-in-the-field/"><link rel="icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-32x32.png" sizes="32x32"><link rel="icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-192x192.png" sizes="192x192"><link rel="apple-touch-icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-180x180.png"><meta name="msapplication-TileImage" content="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-270x270.png"></head><body class="post-template-default single single-post postid-150 single-format-standard translatepress-en_US custombody light"> <script>var thisClass = $(this).attr("w-article-header");
	jQuery(document).ready(function($) {
$('header.' + thisClass).remove();
	});</script> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><div id="wrapper"><header class="header"><div class="container"><div class="row"><div class="col-md-2"><div id="logo"> <a href="https://sadewadee.pages.dev/en/" class="logo" title="Dev Tech">Dev Tech</a></div></div><div class="col-md-10"><nav id="mainmenu"><ul id="menu-main" class="menu"><li id="menu-item-77" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-77"><a href="http://optinlabs.my.id/blogs">Home</a></li><li id="menu-item-76" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-76"><a href="https://sadewadee.pages.dev/en/category/tech/">Tech</a></li></ul></nav></div></div></div></header><div id="content" class="container main-content page"><div class="row"><div class="col-md-8 right-sidebar"><div class="row"><div class="post-150 post type-post status-publish format-standard hentry category-performance category-tech post-container col-md-12"><div class="post-article"><header class="title"><div class="line"><h1 class="title">Debug Web Vitals in the field</h1></div></header><div class="entry-info"> <span> <i class="fa fa-clock-o"></i>July 5, 2021</span> <span class="entry-standard"><i class="fa fa-pencil-square-o"></i>Article</span></div><div><header class="w-article-header"><p>Learn how to attribute your Web Vitals data with debug information to help you identify and fix real-user issues with analytics</p><p><time>Apr 1, 2021</time><span class="w-author__separator">•</span> Updated <time>Apr 1, 2021</time></p><div class="w-authors w-mt--xl w-pt--sm"><div class="w-author"><a href="https://sadewadee.pages.dev/authors/philipwalton"><img alt="Philip Walton" height="64" src="https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?auto=format&amp;fit=crop&amp;h=64&amp;w=64" width="64" class="w-author__image" loading="lazy" decoding="async" sizes="(min-width: 64px) 64px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=1&amp;q=75 ,https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=2&amp;q=50 2x,https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=3&amp;q=35 3x,https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=4&amp;q=23 4x,https://web-dev.imgix.net/image/admin/ovBM8MF9rYDxVVHUVlcG.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=5&amp;q=20 5x"></a></div></div></header><p>Google currently provides two categories of tools to measure and debug Web Vitals:</p><ul><li><strong>Lab tools:</strong> Tools such as Lighthouse, where your page is loaded in a simulated environment that can mimic various conditions (for example, a slow network and a low-end mobile device).</li><li><strong>Field tools:</strong> Tools such as <a href="https://developers.google.com/web/tools/chrome-user-experience-report" rel="noopener">Chrome User Experience Report</a> (CrUX), which is based on aggregate, real-user data from Chrome. (Note that the field data reported by tools such as <a href="https://developers.google.com/speed/pagespeed/insights/" rel="noopener">PageSpeed Insights</a> and <a href="https://support.google.com/webmasters/answer/9205520" rel="noopener">Search Console</a> is sourced from CrUX data.)</li></ul><p>While field tools offer more accurate data—data which actually represents what real users experience—lab tools are often better at helping you identify and fix issues.</p><p>CrUX data is more representative of your page’s real performance, but knowing your CrUX scores is unlikely to help you figure out <em>how</em> to improve your performance.</p><p>Lighthouse, on the other hand, will identify issues and make specific suggestions for how to improve. However, Lighthouse will only make suggestions for performance issues it discovers at page load time. It does not detect issues that only manifest as a result of user interaction such as scrolling or clicking buttons on the page.</p><p>This raises an important question: <strong>how can you capture debug information for the Web Vitals metric data from real users in the field?</strong></p><p>This post will explain in detail what APIs you can use to collect additional debugging information for each of the current Core Web Vitals metrics and give you ideas for how to capture this data in your existing analytics tool.</p><div id="toc_container" class="no_bullets"><p class="toc_title">Contents</p><ul class="toc_list"><li><a href="#APIs_for_attribution_and_debugging"><span class="toc_number toc_depth_1">1</span> APIs for attribution and debugging #</a><ul><li><a href="#CLS"><span class="toc_number toc_depth_2">1.1</span> CLS #</a><ul><li><a href="#Get_layout_shift_attribution"><span class="toc_number toc_depth_3">1.1.1</span> Get layout shift attribution #</a></li></ul></li><li><a href="#LCP"><span class="toc_number toc_depth_2">1.2</span> LCP #</a><ul><li><a href="#Identify_the_LCP_candidate_element"><span class="toc_number toc_depth_3">1.2.1</span> Identify the LCP candidate element #</a></li></ul></li><li><a href="#FID"><span class="toc_number toc_depth_2">1.3</span> FID #</a><ul><li><a href="#Identify_the_FID_target_element"><span class="toc_number toc_depth_3">1.3.1</span> Identify the FID target element #</a></li></ul></li></ul></li><li><a href="#Usage_with_the_web-vitals_JavaScript_library"><span class="toc_number toc_depth_1">2</span> Usage with the web-vitals JavaScript library #</a></li><li><a href="#Report_and_visualize_the_data"><span class="toc_number toc_depth_1">3</span> Report and visualize the data #</a><ul><li><a href="#The_Web_Vitals_Report_tool"><span class="toc_number toc_depth_2">3.1</span> The Web Vitals Report tool #</a></li></ul></li><li><a href="#Summary"><span class="toc_number toc_depth_1">4</span> Summary #</a></li></ul></div><h2 id="apis-for-attribution-and-debugging"><span id="APIs_for_attribution_and_debugging">APIs for attribution and debugging <a href="#apis-for-attribution-and-debugging" class="w-headline-link">#</a></span></h2><h3 id="cls"><span id="CLS">CLS <a href="#cls" class="w-headline-link">#</a></span></h3><p>Of all the Core Web Vitals metrics, <a href="https://sadewadee.pages.dev/cls/">CLS</a> is perhaps the one for which collecting debug information in the field is the most important. CLS is measured throughout the entire lifespan of the page, so the way a user interacts with the page—how far they scroll, what they click on, and so on—can have a significant impact on whether there are layout shifts and which elements are shifting.</p><p>Consider the following report from PageSpeed Insights for the URL: <a href="https://sadewadee.pages.dev/measure/">web.dev/measure</a></p><p><img alt="A PageSpeed Insights Report with different CLS values" height="587" src="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format" width="800" class="w-screenshot" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/nZjd6rXrOgW5VUsm5fyx.png?auto=format&amp;w=1600 1600w"></p><p>The value reported for CLS from the lab (Lighthouse) compared to the CLS from the field (CrUX data) are quite different, and this makes sense if you consider that the <a href="https://sadewadee.pages.dev/measure/">web.dev/measure</a> page has a lot of interactive content that is not being used when tested in Lighthouse.</p><p>But even if you understand that user interaction affects field data, you still need to know what elements on the page are shifting to result in a score of 0.45 at the 75th percentile.</p><p>The <a href="https://sadewadee.pages.dev/debug-layout-shifts/#layoutshiftattribution">LayoutShiftAttribution</a> interface makes that possible.</p><h4 id="get-layout-shift-attribution"><span id="Get_layout_shift_attribution">Get layout shift attribution <a href="#get-layout-shift-attribution" class="w-headline-link">#</a></span></h4><p>The <a href="https://sadewadee.pages.dev/debug-layout-shifts/#layoutshiftattribution">LayoutShiftAttribution</a> interface is exposed on each <code>layout-shift</code> entry that <a href="https://wicg.github.io/layout-instability" rel="noopener">Layout Instability API</a> emmits.</p><p>For a detailed explanation of both of these interfaces, see <a href="https://sadewadee.pages.dev/debug-layout-shifts/#layoutshiftattribution">Debug layout shifts</a>. For the purposes of this post, the main thing you need to know is that, as a developer, you are able to observe every layout shift that happens on the page as well as what elements are shifting.</p><p>Here’s some example code that logs each layout shift as well as the elements that shifted:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">,</span> startTime<span class="token punctuation">,</span> sources<span class="token punctuation">}</span> <span class="token keyword">of</span> list<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Layout shift:'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>value<span class="token punctuation">,</span> startTime<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>sources<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">{</span>node<span class="token punctuation">,</span> curRect<span class="token punctuation">,</span> prevRect<span class="token punctuation">}</span> <span class="token keyword">of</span> sources<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'  Shift source:'</span><span class="token punctuation">,</span> node<span class="token punctuation">,</span> <span class="token punctuation">{</span>curRect<span class="token punctuation">,</span> prevRect<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'layout-shift'</span><span class="token punctuation">,</span> buffered<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p></p><p>It’s probably not practical to measure and send data to your analytics tool for every single layout shift that occurs; however, by monitoring all shifts, you can keep track of the worst shifts and just report information about those.</p><p>The goal isn’t to identify and fix every single layout shift that occurs for every user, the goal is to identify the shifts that affect the largest number of users and thus contribute the most to your page’s CLS at the 75th percentile.</p><p>Also, you don’t need to compute the largest source element every time there’s a shift, you only need to do so when you’re ready to send the CLS value to your analytics tool.</p><p>The following code takes a list of <code>layout-shift</code> entries that have contributed to CLS and returns the largest source element from the largest shift:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">getCLSDebugTarget</span><span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> largestEntry <span class="token operator">=</span> entries<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br><span class="token keyword">return</span> a <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>value <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>value <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>largestEntry <span class="token operator">&amp;&amp;</span> largestEntry<span class="token punctuation">.</span>sources <span class="token operator">&amp;&amp;</span> largestEntry<span class="token punctuation">.</span>sources<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> largestSource <span class="token operator">=</span> largestEntry<span class="token punctuation">.</span>sources<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br><span class="token keyword">return</span> a<span class="token punctuation">.</span>node <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>previousRect<span class="token punctuation">.</span>width <span class="token operator">*</span> a<span class="token punctuation">.</span>previousRect<span class="token punctuation">.</span>height <span class="token operator">&gt;</span><br>b<span class="token punctuation">.</span>previousRect<span class="token punctuation">.</span>width <span class="token operator">*</span> b<span class="token punctuation">.</span>previousRect<span class="token punctuation">.</span>height <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>largestSource<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">return</span> largestSource<span class="token punctuation">.</span>node<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p></p><p>Once you’ve identified the largest element contributing to the largest shift, you can report that to your analytics tool.</p><p>The element contributing the most to CLS for a given page will likely vary from user to user, but if you aggregate those elements across all users, you’ll be able to generate a list of shifting elements affecting the most number of users.</p><p>Once you’ve identified and fixed the root cause of the shifts for those elements, your analytics code will start reporting smaller shifts as the “worst” shifts for your pages. Eventually, all reported shifts will be small enough that your pages are well within <a href="https://sadewadee.pages.dev/cls/#what-is-a-good-cls-score">the “good” threshold of 0.1</a>!</p><div style="clear:both; margin-top:0em; margin-bottom:1em;"><a href="https://sadewadee.pages.dev/en/building-split-text-animations/" target="_blank" rel="nofollow" class="u30b415419c57398c4b057558d04dfc6f"><div style="padding-left:1em; padding-right:1em;"><span class="ctaText">READ Also : </span>  <span class="postTitle">Building split text animations</span></div></a></div><p>Some other metadata that may be useful to capture along with the largest shift source element is:</p><ul><li>The time of the largest shift</li><li>The URL path at the time of the largest shift (for sites that dynamically update the URL, such as Single Page Applications).</li></ul><h3 id="lcp"><span id="LCP">LCP <a href="#lcp" class="w-headline-link">#</a></span></h3><p>To debug LCP in the field, the primary information you need is which particular element was the largest element (the LCP candidate element) for that particular page load.</p><p>Note that it’s entirely possible—in fact, it’s quite common—that the LCP candidate element will be different from user to user, even for the exact same page.</p><p>This can happen for several reasons:</p><ul><li>User devices have different screen resolutions, which results in different page layouts and thus different elements being visible within the viewport.</li><li>Users don’t always load pages scrolled to the very top. Oftentimes links will contain <a href="https://sadewadee.pages.dev/text-fragments/#fragment-identifiers">fragment identifiers</a> or even <a href="https://sadewadee.pages.dev/text-fragments/#text-fragments">text fragments</a>, which means it’s possible for your pages to be loaded and displayed at any scroll position on the page.</li><li>Content may be personalized for the current user, so the LCP candidate element could vary wildly from user to user.</li></ul><p>This means you cannot make assumptions about which element or set of elements will be the most common LCP candidate element for a particular page. You have to measure it based on real-user behavior.</p><h4 id="identify-the-lcp-candidate-element"><span id="Identify_the_LCP_candidate_element">Identify the LCP candidate element <a href="#identify-the-lcp-candidate-element" class="w-headline-link">#</a></span></h4><p>To determine the LCP candidate element in JavaScript you can use the <a href="https://wicg.github.io/largest-contentful-paint/" rel="noopener">Largest Contentful Paint API</a>, the same API you use to determine the LCP time value.</p><p>Given a list of <code>largest-contentful-paint</code> entries, you can determine the current LCP candidate element by looking at the last entry:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">getLCPDebugTarget</span><span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> lastEntry <span class="token operator">=</span> entries<span class="token punctuation">[</span>entries<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">return</span> lastEntry<span class="token punctuation">.</span>element<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p></p><div class="w-aside w-aside--caution"><p><strong>Caution</strong>: As explained in the <a href="https://sadewadee.pages.dev/lcp/">LCP metric documentation</a>, the LCP candidate element can change through the page load, so more work is required to identify the “final” LCP candidate element. The easiest way to identify and measure the “final” LCP candidate element is to use the <a href="https://github.com/GoogleChrome/web-vitals/" rel="noopener">web-vitals</a> JavaScript library, as shown in the <a href="#usage-with-the-web-vitals-javascript-library">example below</a>.</p></div><p>Once you know the LCP candidate element, you can send it to your analytics tool along with the metric value. As with CLS, this will help you identify which elements are most important to optimize first.</p><p>Some other metadata that may be useful to capture along with the LCP candidate element:</p><ul><li>The image source URL (if the LCP candidate element is an image).</li><li>The text font family (if the LCP candidate element is text and the page uses web fonts).</li></ul><h3 id="fid"><span id="FID">FID <a href="#fid" class="w-headline-link">#</a></span></h3><p>To debug FID in the field, it’s important to remember that FID measures <a href="https://sadewadee.pages.dev/fid/#fid-in-detail">only the delay portion</a> of the overall first input event latency. That means that what the user interacted with is not really as important as what else was happening on the main thread at the time they interacted.</p><p>For example, many JavaScript applications that support server-side rendering (SSR) will deliver static HTML that can be rendered to the screen before it’s interactive to user input—that is, before the JavaScript required to make the content interactive has finished loading.</p><p>For these types of applications, it can be very important to know whether the first input occurred before or after <a href="https://en.wikipedia.org/wiki/Hydration_(web_development)" rel="noopener">hydration</a>. If it turns out that many people are attempting to interact with the page before hydration completes, consider rendering your pages in a disabled or loading state rather than in a state that looks interactive.</p><p>If your application framework exposes the hydration timestamp, you can easily compare that with the timestamp of the <code>first-input</code> entry to determine whether the first input happened before or after hydration. If your framework doesn’t expose that timestamp, or doesn’t use hydration at all, another useful signal may be whether input occurred before or after JavaScript finished loading.</p><p>The <code>DOMContentLoaded</code> event fires after the page’s HTML has completely loaded and parsed, which includes waiting for any synchronous, deferred, or module scripts (including all statically imported modules) to load. So you can use the timing of that event and compare it to when FID occurred.</p><p>The following code takes a <code>first-input</code> entry and returns true if the first input occurred prior to the end of the <code>DOMContentLoaded</code> event:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">wasFIDBeforeDCL</span><span class="token punctuation">(</span><span class="token parameter">fidEntry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> navEntry <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">getEntriesByType</span><span class="token punctuation">(</span><span class="token string">'navigation'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number"></span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">return</span> navEntry <span class="token operator">&amp;&amp;</span> fidEntry<span class="token punctuation">.</span>startTime <span class="token operator"> navEntry<span class="token punctuation">.</span>domContentLoadedEventStart<span class="token punctuation">;</span><br><span class="token punctuation">}</span></span></code></pre><p></p><div class="w-aside w-aside--note"><p>If your page uses <code>async</code> scripts or dynamic <code>import()</code> to load JavaScript, the <code>DOMContentLoaded</code> event may not be a useful signal. Instead, you can consider using the <code>load</code> event or—if there’s a particular script you know takes a while to execute—you can use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API/Using_the_Resource_Timing_API" rel="noopener">Resource Timing</a> entry for that script.</p></div><h4 id="identify-the-fid-target-element"><span id="Identify_the_FID_target_element">Identify the FID target element <a href="#identify-the-fid-target-element" class="w-headline-link">#</a></span></h4><p>Another potentially useful debug signal is the element that was interacted with. While the interaction with the element itself does not contribute to FID (remember FID is just the delay portion of the total event latency), knowing which elements your users are interacting with may be useful in determining how best to improve FID.</p><p>For example, if the vast majority of your user’s first interactions are with a particular element, it consider inlining the JavaScript code needed for that element in the HTML, and lazy loading the rest.</p><div style="clear:both; margin-top:0em; margin-bottom:1em;"><a href="https://sadewadee.pages.dev/en/building-a-tabs-component/" target="_blank" rel="nofollow" class="uc47d8aedabb7fb5ca006893b99bcaac9"><div style="padding-left:1em; padding-right:1em;"><span class="ctaText">READ Also : </span>  <span class="postTitle">Building a Tabs component</span></div></a></div><p>To get the element associated with the first input event, you can reference the <code>first-input</code> entry’s <code>target</code> property:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">getFIDDebugTarget</span><span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">return</span> entries<span class="token punctuation">[</span><span class="token number"></span><span class="token punctuation">]</span><span class="token punctuation">.</span>target<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p></p><p>Some other metadata that may be useful to capture along with the FID target element:</p><ul><li>The type of event (such as <code>mousedown</code>, <code>keydown</code>, <code>pointerdown</code>).</li><li>Any relevant <a href="https://w3c.github.io/longtasks/#taskattributiontiming" rel="noopener">long task attribution </a>data for the long task that occurred at the same time as the first input (useful if the page loads third-party scripts).</li></ul><h2 id="usage-with-the-web-vitals-javascript-library"><span id="Usage_with_the_web-vitals_JavaScript_library">Usage with the web-vitals JavaScript library <a href="#usage-with-the-web-vitals-javascript-library" class="w-headline-link">#</a></span></h2><p>The sections above offer some suggestions for additional debug info to include in the data you send to your analytics tool. Each of the examples includes some code that uses one or more performance entries associated with a particular Web Vitals metric and returns a DOM element that can be used to help debug issues affecting that metric.</p><p>These examples are designed to work well with the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener">web-vitals</a> JavaScript library, which exposes the list of performance entries on the <a href="https://github.com/GoogleChrome/web-vitals#api" rel="noopener"><code>Metric</code></a> object passed to each callback function.</p><p>If you combine the examples listed above with the <code>web-vitals</code> metric functions, the end result will look something like this:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>getLCP<span class="token punctuation">,</span> getFID<span class="token punctuation">,</span> getCLS<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'web-vitals'</span><span class="token punctuation">;</span><p><span class="token keyword">function</span> <span class="token function">getSelector</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> maxLen <span class="token operator">=</span> <span class="token number">100</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">let</span> sel <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><br><span class="token keyword">try</span> <span class="token punctuation">{</span><br><span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> part <span class="token operator">=</span> node<span class="token punctuation">.</span>id <span class="token operator">?</span> <span class="token string">'#'</span> <span class="token operator">+</span> node<span class="token punctuation">.</span>id <span class="token operator">:</span> node<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><br><span class="token punctuation">(</span>node<span class="token punctuation">.</span>className <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>className<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">?</span><br><span class="token string">'.'</span> <span class="token operator">+</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>sel<span class="token punctuation">.</span>length <span class="token operator">+</span> part<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> maxLen <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> sel <span class="token operator">||</span> part<span class="token punctuation">;</span><br>sel <span class="token operator">=</span> sel <span class="token operator">?</span> part <span class="token operator">+</span> <span class="token string">'&gt;'</span> <span class="token operator">+</span> sel <span class="token operator">:</span> part<span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span><br>node <span class="token operator">=</span> node<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token punctuation">}</span><br><span class="token keyword">return</span> sel<span class="token punctuation">;</span><br><span class="token punctuation">}</span></p><p><span class="token keyword">function</span> <span class="token function">getLargestLayoutShiftEntry</span><span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">return</span> entries<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>value <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>value <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></p><p><span class="token keyword">function</span> <span class="token function">getLargestLayoutShiftSource</span><span class="token punctuation">(</span><span class="token parameter">sources</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">return</span> sources<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br><span class="token keyword">return</span> a<span class="token punctuation">.</span>node <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>previousRect<span class="token punctuation">.</span>width <span class="token operator">*</span> a<span class="token punctuation">.</span>previousRect<span class="token punctuation">.</span>height <span class="token operator">&gt;</span><br>b<span class="token punctuation">.</span>previousRect<span class="token punctuation">.</span>width <span class="token operator">*</span> b<span class="token punctuation">.</span>previousRect<span class="token punctuation">.</span>height <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></p><p><span class="token keyword">function</span> <span class="token function">wasFIDBeforeDCL</span><span class="token punctuation">(</span><span class="token parameter">fidEntry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> navEntry <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">getEntriesByType</span><span class="token punctuation">(</span><span class="token string">'navigation'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number"></span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">return</span> navEntry <span class="token operator">&amp;&amp;</span> fidEntry<span class="token punctuation">.</span>startTime <span class="token operator"> navEntry<span class="token punctuation">.</span>domContentLoadedEventStart<span class="token punctuation">;</span><br><span class="token punctuation">}</span></span></p><p><span class="token keyword">function</span> <span class="token function">getDebugInfo</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> entries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>entries<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'LCP'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> lastEntry <span class="token operator">=</span> entries<span class="token punctuation">[</span>entries<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">return</span> <span class="token punctuation">{</span><br>debug_target<span class="token operator">:</span> <span class="token function">getSelector</span><span class="token punctuation">(</span>lastEntry<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">,</span><br>event_time<span class="token operator">:</span> lastEntry<span class="token punctuation">.</span>startTime<span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'FID'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> firstEntry <span class="token operator">=</span> entries<span class="token punctuation">[</span><span class="token number"></span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">return</span> <span class="token punctuation">{</span><br>debug_target<span class="token operator">:</span> <span class="token function">getSelector</span><span class="token punctuation">(</span>firstEntry<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">,</span><br>debug_event<span class="token operator">:</span> firstEntry<span class="token punctuation">.</span>name<span class="token punctuation">,</span><br>debug_timing<span class="token operator">:</span> <span class="token function">wasFIDBeforeDCL</span><span class="token punctuation">(</span>firstEntry<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'pre_dcl'</span> <span class="token operator">:</span> <span class="token string">'post_dcl'</span><span class="token punctuation">,</span><br>event_time<span class="token operator">:</span> firstEntry<span class="token punctuation">.</span>startTime<span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'CLS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> largestEntry <span class="token operator">=</span> <span class="token function">getLargestLayoutShiftEntry</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>largestEntry <span class="token operator">&amp;&amp;</span> largestEntry<span class="token punctuation">.</span>sources <span class="token operator">&amp;&amp;</span> largestEntry<span class="token punctuation">.</span>sources<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">const</span> largestSource <span class="token operator">=</span> <span class="token function">getLargestLayoutShiftSource</span><span class="token punctuation">(</span>largestEntry<span class="token punctuation">.</span>sources<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>largestSource<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">return</span> <span class="token punctuation">{</span><br>debug_target<span class="token operator">:</span> <span class="token function">getSelector</span><span class="token punctuation">(</span>largestSource<span class="token punctuation">.</span>node<span class="token punctuation">)</span><span class="token punctuation">,</span><br>event_time<span class="token operator">:</span> largestEntry<span class="token punctuation">.</span>startTime<span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token keyword">return</span> <span class="token punctuation">{</span><br>debug_target<span class="token operator">:</span> <span class="token string">'(not set)'</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></p><p><span class="token keyword">function</span> <span class="token function">sendToAnalytics</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> entries<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>navigator<span class="token punctuation">.</span><span class="token function">sendBeacon</span><span class="token punctuation">(</span><span class="token string">'/analytics'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>name<span class="token punctuation">,</span><br>value<span class="token punctuation">,</span><br><span class="token operator">...</span><span class="token function">getDebugInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> entries<span class="token punctuation">)</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></p><p><span class="token function">getLCP</span><span class="token punctuation">(</span>sendToAnalytics<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">getFID</span><span class="token punctuation">(</span>sendToAnalytics<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">getCLS</span><span class="token punctuation">(</span>sendToAnalytics<span class="token punctuation">)</span><span class="token punctuation">;</span></p></code></pre><p></p><p>The specific format required to send the data will vary by analytics tool, but the above code should be sufficient to get the data needed, regardless of the format requirements.</p><div class="w-aside w-aside--note"><p>The code above also includes a <code>getSelector()</code> function (not mentioned in previous sections), which takes a DOM node and returns a CSS selector representing that node and its place in the DOM. It also takes an optional maximum length parameter (defaulting to 100 characters) in the event that your analytics provider has length restrictions on the data you send it.</p></div><h2 id="report-and-visualize-the-data"><span id="Report_and_visualize_the_data">Report and visualize the data <a href="#report-and-visualize-the-data" class="w-headline-link">#</a></span></h2><p>Once you’ve started collecting debug information along with your Web Vitals metrics, the next step is aggregating the data across all your users to start looking for patterns and trends.</p><p>As mentioned above, you don’t necessarily need to address every single issue your users are encountering, you want to address—especially at first—the issues that are affecting the largest number of users, which should also be the issues that have the largest negative impact on your Core Web Vitals scores.</p><h3 id="the-web-vitals-report-tool"><span id="The_Web_Vitals_Report_tool">The Web Vitals Report tool <a href="#the-web-vitals-report-tool" class="w-headline-link">#</a></span></h3><p>If you’re using the <a href="https://github.com/GoogleChromeLabs/web-vitals-report" rel="noopener">Web Vitals Report</a> tool, it’s been recently updated to support <a href="https://github.com/GoogleChromeLabs/web-vitals-report#debug-dimension" rel="noopener">reporting on a single debug dimension</a> for each of the Core Web Vitals metrics.</p><p>Here’s a screenshot from the Web Vitals Report debug info section, showing data for the Web Vitals Report tool website itself:</p><p><img alt="Web Vitals Report showing debug information" height="535" src="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format" width="800" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/eqprBhZUGfb8WYnumQ9ljAxRrA72/Y49u3cmRD6RfAaZGCSmx.png?auto=format&amp;w=1600 1600w"></p><p>Using the data above, you can see that whatever is causing the <code>section.Intro</code> element to shift is contributing the most to CLS on this page, so identifying and fixing the cause of that shift will yield the greatest improvement to the score.</p><h2 id="summary"><span id="Summary">Summary <a href="#summary" class="w-headline-link">#</a></span></h2><p>Hopefully this post has helped outline the specific ways you can use the existing performance APIs to get debug information for each of the Core Web Vitals metrics based on real-user interactions in the field. While it’s focused on the Core Web Vitals, the concepts also apply to debugging any performance metric that’s measurable in JavaScript.</p><p>If you’re just getting started measuring performance, and you’re already a Google Analytics user, the Web Vitals Report tool may be a good place to start because it already supports reporting debug information for each of the Core Web Vitals metrics.</p><p>If you’re an analytics vendor and you’re looking to improve your products and provide more debugging information to your users, consider some of the techniques described here but don’t limit yourself to <em>just</em> the ideas presented here. This post is intended to be generally applicable to all analytics tools; however, individual analytics tools likely can (and should) capture and report even more debug information.</p><p>Lastly, if you feel there are gaps in your ability to debug these metrics due to missing features or information in the APIs themselves send your feedback to <a href="mailto:web-vitals-feedback@googlegroups.com" rel="noopener">web-vitals-feedback@googlegroups.com</a>.</p><div class="w-mb--l w-mt--l w-post-github-link"><span class="w-mr--sm">Last updated: <time>Apr 1, 2021</time></span><a href="https://github.com/GoogleChrome/web.dev/blob/master/src/site/content/en/blog/debug-web-vitals-in-the-field/index.md">Improve article</a></div><p><web-feedback additional-questions=""></web-feedback></p></div><div class="clear"></div></div><div style="clear:both"></div></div></div></div><div class="col-md-4"><div class="row"><div id="sidebar" class="col-md-12"><div class="sidebar-box"><div class="widget-box"><header class="title"><div class="line"><h3>Calendar</h3></div></header><div id="calendar_wrap" class="calendar_wrap"><table id="wp-calendar" class="wp-calendar-table"><caption>November 2021</caption><thead><tr><th scope="col" title="Monday">M</th><th scope="col" title="Tuesday">T</th><th scope="col" title="Wednesday">W</th><th scope="col" title="Thursday">T</th><th scope="col" title="Friday">F</th><th scope="col" title="Saturday">S</th><th scope="col" title="Sunday">S</th></tr></thead><tbody><tr><td><a href="https://sadewadee.pages.dev/en/2021/11/01/" aria-label="Posts published on November 1, 2021">1</a></td><td><a href="https://sadewadee.pages.dev/en/2021/11/02/" aria-label="Posts published on November 2, 2021">2</a></td><td><a href="https://sadewadee.pages.dev/en/2021/11/03/" aria-label="Posts published on November 3, 2021">3</a></td><td id="today"><a href="https://sadewadee.pages.dev/en/2021/11/04/" aria-label="Posts published on November 4, 2021">4</a></td><td>5</td><td>6</td><td>7</td></tr><tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr><tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr><tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr><tr><td>29</td><td>30</td><td class="pad" colspan="5"> </td></tr></tbody></table><nav aria-label="Previous and next months" class="wp-calendar-nav"> <span class="wp-calendar-nav-prev"><a href="https://sadewadee.pages.dev/en/2021/10/">« Oct</a></span> <span class="pad"> </span> <span class="wp-calendar-nav-next"> </span></nav></div></div><div class="widget-box"><header class="title"><div class="line"><h3>Archives</h3></div></header><ul><li><a href="https://sadewadee.pages.dev/en/2021/11/">November 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/10/">October 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/08/">August 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/07/">July 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/06/">June 2021</a></li></ul></div><div class="widget-box"><header class="title"><div class="line"><h3>Categories</h3></div></header><ul><li class="cat-item cat-item-18"><a href="https://sadewadee.pages.dev/en/category/improve-article/">Improve article</a></li><li class="cat-item cat-item-19"><a href="https://sadewadee.pages.dev/en/category/performance/">Performance</a></li><li class="cat-item cat-item-16"><a href="https://sadewadee.pages.dev/en/category/tech/">Tech</a></li><li class="cat-item cat-item-1"><a href="https://sadewadee.pages.dev/en/category/uncategorized/">Uncategorized</a></li><li class="cat-item cat-item-21"><a href="https://sadewadee.pages.dev/en/category/wordpress/">Wordpress</a></li></ul></div></div></div></div></div><div class="clear"></div></div></div><footer id="footer"><div class="container"><div class="row copyright"><div class="col-md-6"><p> Copyright Dev Tech 2021                                                | By <a href="https://www.themeinprogress.com/" target="_blank">Theme in Progress</a> | <a href="http://wordpress.org/" title="A Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress</a></p></div><div class="col-md-6"><div class="socials"></div></div></div></div></footer></div><div id="trp-floater-ls" onclick="" data-no-translation class="trp-language-switcher-container trp-floater-ls-names trp-bottom-right trp-color-dark"><div id="trp-floater-ls-current-language" class="trp-with-flags"> <a href="#" class="trp-floater-ls-disabled-language trp-ls-disabled-language" onclick="event.preventDefault()"> <img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/en_US.png" width="18" height="12" alt="en_US" title="English">English </a></div><div id="trp-floater-ls-language-list" class="trp-with-flags"><div class="trp-language-wrap"> <a href="https://sadewadee.pages.dev/id/debug-web-vitals-in-the-field/" title="Indonesian"> <img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/id_ID.png" width="18" height="12" alt="id_ID" title="Indonesian">Indonesian </a> <a href="#" class="trp-floater-ls-disabled-language trp-ls-disabled-language" onclick="event.preventDefault()"><img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/en_US.png" width="18" height="12" alt="en_US" title="English">English</a></div></div></div> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/dist/vendor/regenerator-runtime.min.js?ver=0.13.7" id="regenerator-runtime-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/dist/vendor/wp-polyfill.min.js?ver=3.15.0" id="wp-polyfill-js"></script> <script type="text/javascript" id="contact-form-7-js-extra">var wpcf7 = {"api":{"root":"https:\/\/sadewadee.pages.dev\/en\/wp-json\/","namespace":"contact-form-7\/v1"},"cached":"1"};</script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/contact-form-7/includes/js/index.js?ver=5.4.2" id="contact-form-7-js"></script> <script type="text/javascript" id="toc-front-js-extra">var tocplus = {"smooth_scroll":"1","visibility_show":"show","visibility_hide":"hide","visibility_hide_by_default":"1","width":"Auto"};</script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/table-of-contents-plus/front.min.js?ver=2106" id="toc-front-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.easing.js?ver=1.3" id="jquery-easing-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.tinynav.js?ver=1.1" id="jquery-tinynav-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.tipsy.js?ver=1.0.0a" id="jquery-tipsy-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/prettyPhoto.js?ver=3.1.4" id="prettyPhoto-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/imagesloaded.min.js?ver=4.1.4" id="imagesloaded-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/masonry.min.js?ver=4.2.2" id="masonry-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/template.js?ver=1.0.0" id="alhena-lite-template-js"></script> </body></html>
