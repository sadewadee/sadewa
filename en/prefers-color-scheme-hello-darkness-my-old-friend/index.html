<!DOCTYPE html>
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.2, user-scalable=yes"><link media="all" href="https://sadewadee.pages.dev/contents/cache/autoptimize/css/autoptimize_bbf28d6029552783c347cefa7370d91e.css" rel="stylesheet"><title>prefers-color-scheme: Hello darkness, my old friend | Dev Tech | Optin Labs</title><meta name="robots" content="max-image-preview:large"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="alternate" type="application/rss+xml" title="Dev Tech » Feed" href="https://sadewadee.pages.dev/en/feed/"><link rel="alternate" type="application/rss+xml" title="Dev Tech » Comments Feed" href="https://sadewadee.pages.dev/en/comments/feed/"><link rel="alternate" type="application/rss+xml" title="Dev Tech » prefers-color-scheme: Hello darkness, my old friend Comments Feed" href="https://sadewadee.pages.dev/en/prefers-color-scheme-hello-darkness-my-old-friend/feed/"><link rel="stylesheet" id="google-fonts-css" href="https://fonts.googleapis.com/css?family=Raleway%3A400%2C700%2C500%2C600%2C300%2C200%2C100%2C800%2C900%7CRoboto%3A400%2C700%2C400italic%2C500%2C500italic%2C300italic%2C300%2C100italic%2C100%2C700italic%2C900%2C900italic%7CKristi&amp;subset=latin%2Clatin-ext&amp;ver=1.0.0" type="text/css" media="all"> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/jquery/jquery.min.js?ver=3.6.0" id="jquery-core-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/jquery/jquery-migrate.min.js?ver=3.3.2" id="jquery-migrate-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/wp-automatic/js/main-front.js?ver=5.8.1" id="wp_automatic_gallery-js"></script>  <link rel="alternate" type="application/json" href="https://sadewadee.pages.dev/en/wp-json/wp/v2/posts/57"><link rel="alternate" type="application/json+oembed" href="https://sadewadee.pages.dev/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fsadewadee.pages.dev%2Fen%2Fprefers-color-scheme-hello-darkness-my-old-friend%2F"><link rel="alternate" type="text/xml+oembed" href="https://sadewadee.pages.dev/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fsadewadee.pages.dev%2Fen%2Fprefers-color-scheme-hello-darkness-my-old-friend%2F&amp;format=xml"><link rel="canonical" href="https://sadewadee.pages.dev/en/prefers-color-scheme-hello-darkness-my-old-friend/"><meta name="description" content="Introduction # 📚 I have done a lot of background research on the history and theory of dark mode, if you are only interested in working with dark mode, feel free to skip the introduction. Dark mode before Dark Mode # Green screen (Source) We have gone full circle with dark mode. In the dawn of p ... | Your problem is our pleasure."> <script type="application/ld+json">{"@context":"https:\/\/schema.org","@graph":[{"@type":"WPHeader","url":"https:\/\/sadewadee.pages.dev\/en\/prefers-color-scheme-hello-darkness-my-old-friend\/","headline":"prefers-color-scheme: Hello darkness, my old friend | Dev Tech | Optin Labs","description":"Introduction # \ud83d\udcda I have done a lot of background research on the history and theory of dark mode, if you are only interested in working with dark mode, feel free to skip the introduction. Dark mode before Dark Mode # Green screen (Source) We have gone full circle with dark mode. In the dawn of p ... | Your problem is our pleasure."},{"@type":"WPFooter","url":"https:\/\/sadewadee.pages.dev\/en\/prefers-color-scheme-hello-darkness-my-old-friend\/","headline":"prefers-color-scheme: Hello darkness, my old friend | Dev Tech | Optin Labs","description":"Introduction # \ud83d\udcda I have done a lot of background research on the history and theory of dark mode, if you are only interested in working with dark mode, feel free to skip the introduction. Dark mode before Dark Mode # Green screen (Source) We have gone full circle with dark mode. In the dawn of p ... | Your problem is our pleasure.","copyrightYear":"2021"},{"@type":"Organization","@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization","url":"https:\/\/sadewadee.pages.dev","name":"Dev Tech"},{"@type":"WebSite","@id":"https:\/\/sadewadee.pages.dev\/#schema-website","url":"https:\/\/sadewadee.pages.dev","name":"Blog Teknologi Indonesia","encoding":"UTF-8","potentialAction":{"@type":"SearchAction","target":"https:\/\/sadewadee.pages.dev\/en\/search\/{search_term_string}\/","query-input":"required name=search_term_string"}},{"@type":"WebPage","@id":"https:\/\/sadewadee.pages.dev\/en\/prefers-color-scheme-hello-darkness-my-old-friend\/#schema-webpage","isPartOf":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-website"},"publisher":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization"},"url":"https:\/\/sadewadee.pages.dev\/en\/prefers-color-scheme-hello-darkness-my-old-friend\/"},{"@type":"Article","mainEntityOfPage":{"@id":"https:\/\/sadewadee.pages.dev\/en\/prefers-color-scheme-hello-darkness-my-old-friend\/#schema-webpage"},"author":{"@type":"Person","@id":"https:\/\/sadewadee.pages.dev\/en\/author\/sadewadee\/#schema-author","name":"sadewadee","url":"https:\/\/sadewadee.pages.dev\/en\/author\/sadewadee\/"},"publisher":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization"},"dateModified":"2021-06-17T13:37:42","datePublished":"2021-06-17T13:37:42","headline":"prefers-color-scheme: Hello darkness, my old friend | Dev Tech | Optin Labs","description":"Introduction # \ud83d\udcda I have done a lot of background research on the history and theory of dark mode, if you are only interested in working with dark mode, feel free to skip the introduction. Dark mode before Dark Mode # Green screen (Source) We have gone full circle with dark mode. In the dawn of p ... | Your problem is our pleasure.","name":"prefers-color-scheme: Hello darkness, my old friend"}]}</script> <meta property="og:type" content="article"><meta property="og:url" content="https://sadewadee.pages.dev/en/prefers-color-scheme-hello-darkness-my-old-friend/"><meta property="og:title" content="prefers-color-scheme: Hello darkness, my old friend | Dev Tech | Optin Labs"><meta property="og:description" content="Introduction # 📚 I have done a lot of background research on the history and theory of dark mode, if you are only interested in working with dark mode, feel free to skip the introduction. Dark mode before Dark Mode # Green screen (Source) We have gone full circle with dark mode. In the dawn of p ... | Your problem is our pleasure."><meta property="og:image" content="https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format"><meta property="article:published_time" content="2021-06-17T13:37:42"><meta property="article:author" content="sadewadee"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="prefers-color-scheme: Hello darkness, my old friend | Dev Tech | Optin Labs"><meta name="twitter:description" content="Introduction # 📚 I have done a lot of background research on the history and theory of dark mode, if you are only interested in working with dark mode, feel free to skip the introduction. Dark mode before Dark Mode # Green screen (Source) We have gone full circle with dark mode. In the dawn of p ... | Your problem is our pleasure."><meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format"><link rel="alternate" hreflang="en-US" href="https://sadewadee.pages.dev/en/prefers-color-scheme-hello-darkness-my-old-friend/"><link rel="alternate" hreflang="en" href="https://sadewadee.pages.dev/en/prefers-color-scheme-hello-darkness-my-old-friend/"><link rel="alternate" hreflang="id-ID" href="https://sadewadee.pages.dev/id/prefers-color-scheme-hello-darkness-my-old-friend/"><link rel="alternate" hreflang="id" href="https://sadewadee.pages.dev/id/prefers-color-scheme-hello-darkness-my-old-friend/"><link rel="icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-32x32.png" sizes="32x32"><link rel="icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-192x192.png" sizes="192x192"><link rel="apple-touch-icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-180x180.png"><meta name="msapplication-TileImage" content="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-270x270.png"></head><body class="post-template-default single single-post postid-57 single-format-standard translatepress-en_US custombody light"> <script>var thisClass = $(this).attr("w-article-header");
	jQuery(document).ready(function($) {
$('header.' + thisClass).remove();
	});</script> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><div id="wrapper"><header class="header"><div class="container"><div class="row"><div class="col-md-2"><div id="logo"> <a href="https://sadewadee.pages.dev/en/" class="logo" title="Dev Tech">Dev Tech</a></div></div><div class="col-md-10"><nav id="mainmenu"><ul id="menu-main" class="menu"><li id="menu-item-77" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-77"><a href="http://optinlabs.my.id/blogs">Home</a></li><li id="menu-item-76" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-76"><a href="https://sadewadee.pages.dev/en/category/tech/">Tech</a></li></ul></nav></div></div></div></header><div id="content" class="container main-content page"><div class="row"><div class="col-md-8 right-sidebar"><div class="row"><div class="post-57 post type-post status-publish format-standard hentry category-tech post-container col-md-12"><div class="post-article"><header class="title"><div class="line"><h1 class="title">prefers-color-scheme: Hello darkness, my old friend</h1></div></header><div class="entry-info"> <span> <i class="fa fa-clock-o"></i>June 17, 2021</span> <span class="entry-standard"><i class="fa fa-pencil-square-o"></i>Article</span></div><div id="toc_container" class="no_bullets"><p class="toc_title">Contents</p><ul class="toc_list"><li><a href="#Introduction"><span class="toc_number toc_depth_1">1</span> Introduction #</a><ul><li><a href="#Dark_mode_before_Dark_Mode"><span class="toc_number toc_depth_2">1.1</span> Dark mode before Dark Mode #</a></li><li><a href="#Why_dark_mode"><span class="toc_number toc_depth_2">1.2</span> Why dark mode #</a><ul><li><a href="#Dark_mode_for_aesthetic_reasons"><span class="toc_number toc_depth_3">1.2.1</span> Dark mode for aesthetic reasons #</a></li><li><a href="#Dark_mode_as_an_accessibility_tool"><span class="toc_number toc_depth_3">1.2.2</span> Dark mode as an accessibility tool #</a></li><li><a href="#Dark_mode_power_savings_on_AMOLED_screens"><span class="toc_number toc_depth_3">1.2.3</span> Dark mode power savings on AMOLED screens #</a></li></ul></li></ul></li><li><a href="#Activating_dark_mode_in_the_operating_system"><span class="toc_number toc_depth_1">2</span> Activating dark mode in the operating system #</a></li><li><a href="#The_prefers-color-scheme_media_query"><span class="toc_number toc_depth_1">3</span> The prefers-color-scheme media query #</a></li><li><a href="#Supporting_dark_mode"><span class="toc_number toc_depth_1">4</span> Supporting dark mode #</a><ul><li><a href="#Finding_out_if_dark_mode_is_supported_by_the_browser"><span class="toc_number toc_depth_2">4.1</span> Finding out if dark mode is supported by the browser #</a></li><li><a href="#Dark_mode_in_practice"><span class="toc_number toc_depth_2">4.2</span> Dark mode in practice #</a></li><li><a href="#Loading_strategy"><span class="toc_number toc_depth_2">4.3</span> Loading strategy #</a></li><li><a href="#Stylesheet_architecture"><span class="toc_number toc_depth_2">4.4</span> Stylesheet architecture #</a></li><li><a href="#Full_example"><span class="toc_number toc_depth_2">4.5</span> Full example #</a></li><li><a href="#Loading_impact"><span class="toc_number toc_depth_2">4.6</span> Loading impact #</a></li><li><a href="#Reacting_on_dark_mode_changes"><span class="toc_number toc_depth_2">4.7</span> Reacting on dark mode changes #</a></li></ul></li><li><a href="#Debugging_and_testing_dark_mode"><span class="toc_number toc_depth_1">5</span> Debugging and testing dark mode #</a><ul><li><a href="#Emulating_prefers-color-scheme_in_DevTools"><span class="toc_number toc_depth_2">5.1</span> Emulating prefers-color-scheme in DevTools #</a></li><li><a href="#Screenshotting_prefers-color-scheme_with_Puppeteer"><span class="toc_number toc_depth_2">5.2</span> Screenshotting prefers-color-scheme with Puppeteer #</a></li></ul></li><li><a href="#Dark_mode_best_practices"><span class="toc_number toc_depth_1">6</span> Dark mode best practices #</a><ul><li><a href="#Avoid_pure_white"><span class="toc_number toc_depth_2">6.1</span> Avoid pure white #</a></li><li><a href="#Re-colorize_and_darken_photographic_images"><span class="toc_number toc_depth_2">6.2</span> Re-colorize and darken photographic images #</a><ul><li><a href="#Customizing_dark_mode_re-colorization_intensities_with_JavaScript"><span class="toc_number toc_depth_3">6.2.1</span> Customizing dark mode re-colorization intensities with JavaScript #</a></li></ul></li><li><a href="#Invert_vector_graphics_and_icons"><span class="toc_number toc_depth_2">6.3</span> Invert vector graphics and icons #</a></li><li><a href="#Use_currentColor_for_inline_SVGs"><span class="toc_number toc_depth_2">6.4</span> Use currentColor for inline SVGs #</a></li><li><a href="#Smooth_transitions_between_modes"><span class="toc_number toc_depth_2">6.5</span> Smooth transitions between modes #</a></li><li><a href="#Art_direction_with_dark_mode"><span class="toc_number toc_depth_2">6.6</span> Art direction with dark mode #</a></li><li><a href="#Dark_mode_but_add_an_opt-out"><span class="toc_number toc_depth_2">6.7</span> Dark mode, but add an opt-out #</a><ul><li><a href="#The_custom_element"><span class="toc_number toc_depth_3">6.7.1</span> The  custom element #</a></li></ul></li></ul></li><li><a href="#Conclusions"><span class="toc_number toc_depth_1">7</span> Conclusions #</a></li><li><a href="#Related_links"><span class="toc_number toc_depth_1">8</span> Related links #</a></li><li><a href="#Acknowledgements"><span class="toc_number toc_depth_1">9</span> Acknowledgements #</a></li></ul></div><h2 id="introduction"><span id="Introduction">Introduction <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#introduction">#</a></span></h2><div class="w-aside w-aside--note"><p>📚 I have done a lot of background research on the history and theory of dark mode,<br> if you are only interested in working with dark mode, feel free to<br> <a href="https://web.dev/prefers-color-scheme/#activating-dark-mode-in-the-operating-system">skip the introduction</a>.</p></div><h3 id="dark-mode-before-dark-mode"><span id="Dark_mode_before_Dark_Mode">Dark mode before <em>Dark Mode</em> <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#dark-mode-before-dark-mode">#</a></span></h3><figure class="w-figure w-figure--inline-right"> <img alt="Green screen computer monitor" height="175" loading="lazy" src="https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format" width="233"><figcaption class="w-figcaption">Green screen (<a href="https://commons.wikimedia.org/wiki/File:Compaq_Portable_and_Wordperfect.JPG">Source</a>)</figcaption></figure><p>We have gone full circle with dark mode.<br> In the dawn of personal computing, dark mode wasn’t a matter of choice,<br> but a matter of fact:<br> Monochrome <abbr title="Cathode-Ray Tube">CRT</abbr> computer monitors worked by firing electron beams<br> on a phosphorescent screen and the phosphor used in early CRTs was green.<br> Because text was displayed in green and the rest of the screen was black, these models were often referred to as<br> <a href="https://commons.wikimedia.org/wiki/File:Schneider_CPC6128_with_green_monitor_GT65,_start_screen.jpg" rel="noopener">green screens</a>.</p><figure class="w-figure w-figure--inline-left"> <img alt="Dark-on-white word processing" height="175" loading="lazy" src="https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format" width="222"><figcaption class="w-figcaption">Dark-on-white (<a href="https://www.youtube.com/watch?v=qKkABzt0Zqg">Source</a>)</figcaption></figure><p>The subsequently introduced Color CRTs displayed multiple colors<br> through the use of red, green, and blue phosphors.<br> They created white by activating all three phosphors simultaneously.<br> With the advent of more sophisticated <abbr title="What You See Is What You Get">WYSIWYG</abbr><br> <a href="https://en.wikipedia.org/wiki/Desktop_publishing" rel="noopener">desktop publishing</a>,<br> the idea of making the virtual document resemble a physical sheet of paper became popular.</p><figure class="w-figure w-figure--inline-right"> <img alt="Dark-on-white webpage in the WorldWideWeb browser" height="175" loading="lazy" src="https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format" width="233"><figcaption class="w-figcaption">The WorldWideWeb browser (<a href="https://commons.wikimedia.org/wiki/File:WorldWideWeb_FSF_GNU.png">Source</a>)</figcaption></figure><p>This is where <em>dark-on-white</em> as a design trend started,<br> and this trend was carried over to the<br> <a href="http://info.cern.ch/hypertext/WWW/TheProject.html" rel="noopener">early document-based web</a>.<br> The first ever browser,<br> <a href="https://en.wikipedia.org/wiki/WorldWideWeb" rel="noopener">WorldWideWeb</a><br> (remember,<br> <a href="https://en.wikipedia.org/wiki/Cascading_Style_Sheets#History" rel="noopener">CSS wasn’t even invented</a> yet),<br> <a href="https://commons.wikimedia.org/wiki/File:WorldWideWeb_FSF_GNU.png" rel="noopener">displayed webpages</a> this way.<br> Fun fact: the second ever browser,<br> <a href="https://en.wikipedia.org/wiki/Line_Mode_Browser" rel="noopener">Line Mode Browser</a>—a terminal-based browser—was<br> green on dark.<br> These days, web pages and web apps are typically designed with dark text<br> on a light background, a baseline assumption that is also hard-coded in user agent stylesheets, including<br> <a href="https://chromium.googlesource.com/chromium/blink/+/master/Source/core/css/html.css" rel="noopener">Chrome’s</a>.</p><figure class="w-figure w-figure--inline-left"> <img alt="Smartphone used while lying in bed" height="175" loading="lazy" src="https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format" width="262"><figcaption class="w-figcaption">Smartphone used in bed (Source: Unsplash)</figcaption></figure><p>The days of CRTs are long over.<br> Content consumption and creation has shifted to mobile devices<br> that use backlit <abbr title="Liquid Crystal Display">LCD</abbr><br> or energy-saving <abbr title="Active-Matrix Organic Light-Emitting Diode">AMOLED</abbr> screens.<br> Smaller and more transportable computers, tablets, and smartphones led to new usage patterns.<br> Leisure tasks like web browsing, coding for fun, and high-end gaming<br> frequently happen after-hours in dim environments.<br> People even enjoy their devices in their beds at night-time.<br> The more people use their devices in the dark,<br> the more the idea of going back to the roots of <em>light-on-dark</em> becomes popular.</p><h3 id="why-dark-mode"><span id="Why_dark_mode">Why dark mode <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#why-dark-mode">#</a></span></h3><h4 id="dark-mode-for-aesthetic-reasons"><span id="Dark_mode_for_aesthetic_reasons">Dark mode for aesthetic reasons <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#dark-mode-for-aesthetic-reasons">#</a></span></h4><p>When people get asked<br> <a href="https://medium.com/dev-channel/let-there-be-darkness-maybe-9facd9c3023d" rel="noopener">why they like or want dark mode</a>,<br> the most popular response is that <em>“it’s easier on the eyes,”</em><br> followed by <em>“it’s elegant and beautiful.”</em><br> Apple in their<br> <a href="https://developer.apple.com/documentation/appkit/supporting_dark_mode_in_your_interface" rel="noopener">Dark Mode developer documentation</a><br> explicitly writes: <em>“The choice of whether to enable a light or dark appearance<br> is an aesthetic one for most users, and might not relate to ambient lighting conditions.”</em></p><div class="w-aside w-aside--note"><p>👩‍🔬 Read up more on<br> <a href="https://medium.com/dev-channel/let-there-be-darkness-maybe-9facd9c3023d" rel="noopener">user research regarding why people want dark mode and how they use it</a>.</p></div><figure class="w-figure w-figure--inline-right"> <img alt="CloseView in Mac OS System 7 with " white on black mode height="225" loading="lazy" src="https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format" width="193"><figcaption class="w-figcaption">System 7 CloseView (<a href="https://archive.org/details/mac_Macintosh_System_7_at_your_Fingertips_1992">Source</a>)</figcaption></figure><h4 id="dark-mode-as-an-accessibility-tool"><span id="Dark_mode_as_an_accessibility_tool">Dark mode as an accessibility tool <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#dark-mode-as-an-accessibility-tool">#</a></span></h4><p>There are also people who actually <em>need</em> dark mode and use it as another accessibility tool,<br> for example, users with low vision.<br> The earliest occurrence of such an accessibility tool I could find is<br> <a href="https://en.wikipedia.org/wiki/System_7" rel="noopener">System 7</a>‘s <em>CloseView</em> feature, which had a toggle for<br> <em>Black on White</em> and <em>White on Black</em>.<br> While System 7 supported color, the default user interface was still black-and-white.</p><p>These inversion-based implementations demonstrated their weaknesses once color was introduced.<br> User research by Szpiro <em>et al.</em> on<br> <a href="https://dl.acm.org/citation.cfm?id=2982168" rel="noopener">how people with low vision access computing devices</a><br> showed that all interviewed users disliked inverted images,<br> but that many preferred light text on a dark background.<br> Apple accommodates for this user preference with a feature called<br> <a href="https://www.apple.com//accessibility/iphone/vision/" rel="noopener">Smart Invert</a>,<br> which reverses the colors on the display, except for images, media,<br> and some apps that use dark color styles.</p><p>A special form of low vision is Computer Vision Syndrome, also known as Digital Eye Strain, which is<br> <a href="https://onlinelibrary.wiley.com/doi/full/10.1111/j.1475-1313.2011.00834.x" rel="noopener">defined</a><br> as <em>“the combination of eye and vision problems associated with the use of computers<br> (including desktop, laptop, and tablets) and other electronic displays (e.g.<br> smartphones and electronic reading devices).”</em><br> It has been <a href="https://bmjopen.bmj.com/content/5/1/e006748" rel="noopener">proposed</a><br> that the use of electronic devices by adolescents, particularly at night time,<br> leads to an increased risk of shorter sleep duration,<br> longer sleep-onset latency, and increased sleep deficiency.<br> Additionally, exposure to blue light has been widely<br> <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4254760/" rel="noopener">reported</a><br> to be involved in the regulation of<br> <a href="https://en.wikipedia.org/wiki/Circadian_rhythm" rel="noopener">circadian rhythm</a><br> and the sleep cycle,<br> and irregular light environments may lead to sleep deprivation,<br> possibly affecting mood and task performance, according to<br> <a href="https://www.college-optometrists.org/oip-resource/computer-vision-syndrome--a-k-a--digital-eye-strain.html" rel="noopener">research by Rosenfield</a>.<br> To limit these negative effects, reducing blue light by adjusting the display color temperature<br> through features like iOS’ <a href="https://support.apple.com/en-us/HT207570" rel="noopener">Night Shift</a> or Android’s<br> <a href="https://support.google.com/pixelphone/answer/7169926?" rel="noopener">Night Light</a> can help,<br> as well as avoiding bright lights or irregular lights in general through dark themes or dark modes.</p><h4 id="dark-mode-power-savings-on-amoled-screens"><span id="Dark_mode_power_savings_on_AMOLED_screens">Dark mode power savings on AMOLED screens <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#dark-mode-power-savings-on-amoled-screens">#</a></span></h4><p>Finally, dark mode is known to save a <em>lot</em> of energy on<br> <abbr title="Active-Matrix Organic Light-Emitting Diode">AMOLED</abbr> screens.<br> Android case studies that focused on popular Google apps<br> like YouTube have shown that the power savings can be up to 60%.<br> The video below has more details on these case studies and the power savings per app.</p><figure class="w-figure w-figure--fullbleed"><div class="youtube"></div></figure><h2 id="activating-dark-mode-in-the-operating-system"><span id="Activating_dark_mode_in_the_operating_system">Activating dark mode in the operating system <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#activating-dark-mode-in-the-operating-system">#</a></span></h2><p>Now that I have covered the background of why dark mode is such a big deal for many users,<br> let’s review how you can support it.</p><figure class="w-figure w-figure--inline-left"> <img alt="Android Q dark mode settings" height="250" loading="lazy" src="https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format" width="218"><figcaption class="w-figcaption">Android Q dark theme settings</figcaption></figure><p>Operating systems that support a dark mode or dark theme<br> typically have an option to activate it somewhere in the settings.<br> On macOS X, it’s in the system preference’s <em>General</em> section and called <em>Appearance</em> (<a href="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/lUAnDhiGiZxigDbCqfn1.png?auto=format">screenshot</a>),<br> and on Windows 10, it’s in the <em>Colors</em> section and called <em>Choose your color</em> (<a href="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Ahr8nkFttRPCe4RH8IEk.png?auto=format">screenshot</a>).<br> For Android Q, you can find it under <em>Display</em> as a <em>Dark Theme</em> toggle switch (<a href="https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format">screenshot</a>),<br> and on iOS 13, you can change the <em>Appearance</em> in the <em>Display &amp; Brightness</em><br> section of the settings (<a href="https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/K0QTu4Elw1ETabtoJjZ1.jpg?auto=format">screenshot</a>).</p><div class="w-clearfix"></div><h2 id="the-prefers-color-scheme-media-query"><span id="The_prefers-color-scheme_media_query">The <code>prefers-color-scheme</code> media query <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#the-prefers-color-scheme-media-query">#</a></span></h2><p>One last bit of theory before I get going.<br> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries" rel="noopener">Media queries</a><br> allow authors to test and query values or features of the user agent or display device,<br> independent of the document being rendered.<br> They are used in the CSS <code>@media</code> rule to conditionally apply styles to a document,<br> and in various other contexts and languages, such as HTML and JavaScript.<br> <a href="https://drafts.csswg.org/mediaqueries-5/" rel="noopener">Media Queries Level 5</a><br> introduces so-called user preference media features, that is,<br> a way for sites to detect the user’s preferred way to display content.</p><div class="w-aside w-aside--note"><p>☝️ An established user preference media feature is <code>prefers-reduced-motion</code><br> that lets you detect the desire for less motion on a page.<br> I have<br> <a href="https://developers.google.com/web/updates/2019/03/prefers-reduced-motion" rel="noopener">written about <code>prefers-reduced-motion</code></a><br> before.</p></div><p>The <a href="https://drafts.csswg.org/mediaqueries-5/#prefers-color-scheme" rel="noopener"><code>prefers-color-scheme</code></a><br> media feature is used to detect<br> if the user has requested the page to use a light or dark color theme.<br> It works with the following values:</p><ul><li><code>light</code>:<br> Indicates that the user has notified the system that they prefer a page that has a light theme<br> (dark text on light background).</li><li><code>dark</code>:<br> Indicates that the user has notified the system that they prefer a page that has a dark theme<br> (light text on dark background).</li></ul><div class="w-aside w-aside--note"><div style="clear:both; margin-top:0em; margin-bottom:1em;"><a href="https://sadewadee.pages.dev/en/evolving-the-cls-metric/" target="_blank" rel="nofollow" class="ue7e1c45b070d921781014cecd7d454fd"><div style="padding-left:1em; padding-right:1em;"><span class="ctaText">READ Also : </span>  <span class="postTitle">Evolving the CLS metric</span></div></a></div><p>An earlier version of the spec included a third value, <code>no-preference</code>.<br> It was meant to indicate that the user has made no preference known to the system.<br> Since no browser ever implemented it, the value was<br> <a href="https://github.com/w3c/csswg-drafts/issues/3857#issuecomment-634779976" rel="noopener">removed</a><br> from the spec.</p></div><h2 id="supporting-dark-mode"><span id="Supporting_dark_mode">Supporting dark mode <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#supporting-dark-mode">#</a></span></h2><h3 id="finding-out-if-dark-mode-is-supported-by-the-browser"><span id="Finding_out_if_dark_mode_is_supported_by_the_browser">Finding out if dark mode is supported by the browser <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#finding-out-if-dark-mode-is-supported-by-the-browser">#</a></span></h3><p>As dark mode is reported through a media query, you can easily check if the current browser<br> supports dark mode by checking if the media query <code>prefers-color-scheme</code> matches at all.<br> Note how I don’t include any value, but purely check if the media query alone matches.</p><div><pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>media <span class="token operator">!==</span> <span class="token string">'not all'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'🎉 Dark mode is supported'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><p>At the time of writing, <code>prefers-color-scheme</code> is supported on both desktop and mobile (where available)<br> by Chrome and Edge as of version 76, Firefox as of version 67,<br> and Safari as of version 12.1 on macOS and as of version 13 on iOS.<br> For all other browsers, you can check the <a href="https://caniuse.com/#feat=prefers-color-scheme" rel="noopener">Can I use support tables</a>.</p><div class="w-aside w-aside--note"><p>There is a custom element <a href="https://github.com/GoogleChromeLabs/dark-mode-toggle" rel="noopener"><code><dark-mode-toggle></dark-mode-toggle></code></a><br> available that adds dark mode support to older browsers.<br> I write about it <a href="https://web.dev/prefers-color-scheme/#the-lessdark-mode-togglegreater-custom-element">further down in this article</a>.</p></div><h3 id="dark-mode-in-practice"><span id="Dark_mode_in_practice">Dark mode in practice <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#dark-mode-in-practice">#</a></span></h3><p>Let’s finally see how supporting dark mode looks like in practice.<br> Just like with the <a href="https://en.wikipedia.org/wiki/Highlander_(film)" rel="noopener">Highlander</a>,<br> with dark mode <em>there can be only one</em>: dark or light, but never both!<br> Why do I mention this? Because this fact should have an impact on the loading strategy.<br> <strong>Please don’t force users to download CSS in the critical rendering path<br> that is for a mode they don’t currently use.</strong><br> To optimize load speed, I have therefore split my CSS for the example app<br> that shows the following recommendations in practice<br> into three parts in order to <a href="https://web.dev/defer-non-critical-css/">defer non-critical CSS</a>:</p><ul><li><code>style.css</code> that contains generic rules that are used universally on the site.</li><li><code>dark.css</code> that contains only the rules needed for dark mode.</li><li><code>light.css</code> that contains only the rules needed for light mode.</li></ul><h3 id="loading-strategy"><span id="Loading_strategy">Loading strategy <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#loading-strategy">#</a></span></h3><p>The two latter ones, <code>light.css</code> and <code>dark.css</code>,<br> are loaded conditionally with a <code><link media></code> query.<br> Initially,<br> <a href="https://caniuse.com/#feat=prefers-color-scheme" rel="noopener">not all browsers will support <code>prefers-color-scheme</code></a><br> (detectable using the <a href="https://web.dev/prefers-color-scheme/#finding-out-if-dark-mode-is-supported-by-the-browser">pattern above</a>),<br> which I deal with dynamically by loading the default <code>light.css</code> file<br> via a conditionally inserted <code></code> element in a minuscule inline script<br> (light is an arbitrary choice, I could also have made dark the default fallback experience).<br> To avoid a <a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content" rel="noopener">flash of unstyled content</a>,<br> I hide the content of the page until <code>light.css</code> has loaded.</p><div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"><br>  <span class="token comment">// If `prefers-color-scheme` is not supported, fall back to light mode.</span><br>  <span class="token comment">// In this case, light.css will be downloaded with `highest` priority.</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>media <span class="token operator">===</span> <span class="token string">'not all'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span><br>    document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><br>        <span class="token string">'beforeend'</span><span class="token punctuation">,</span><br>        <span class="token string">'<link rel="stylesheet" href="https://sadewadee.pages.dev/light.css" onload="document.documentElement.style.display = ''">'</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation"></span>script</span><span class="token punctuation">&gt;</span></span><br><span class="token comment"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/dark.css<span class="token punctuation">"</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(prefers-color-scheme: dark)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/light.css<span class="token punctuation">"</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(prefers-color-scheme: light)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><span class="token comment"></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/style.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span></span></span></span></code></pre></div><h3 id="stylesheet-architecture"><span id="Stylesheet_architecture">Stylesheet architecture <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#stylesheet-architecture">#</a></span></h3><p>I make maximum use of <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/var" rel="noopener">CSS variables</a>,<br> this allows my generic <code>style.css</code> to be, well, generic,<br> and all the light or dark mode customization happens in the two other files <code>dark.css</code> and <code>light.css</code>.<br> Below you can see an excerpt of the actual styles, but it should suffice to convey the overall idea.<br> I declare two variables, <code>-⁠-⁠color</code> and <code>-⁠-⁠background-color</code><br> that essentially create a <em>dark-on-light</em> and a <em>light-on-dark</em> baseline theme.</p><div><pre class="language-css"><code class="language-css"><span class="token comment">/* light.css: 👉 dark-on-light */</span><br><span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">--color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>5<span class="token punctuation">,</span> 5<span class="token punctuation">,</span> 5<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>250<span class="token punctuation">,</span> 250<span class="token punctuation">,</span> 250<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><div><pre class="language-css"><code class="language-css"><span class="token comment">/* dark.css: 👉 light-on-dark */</span><br><span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">--color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>250<span class="token punctuation">,</span> 250<span class="token punctuation">,</span> 250<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>5<span class="token punctuation">,</span> 5<span class="token punctuation">,</span> 5<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><p>In my <code>style.css</code>, I then use these variables in the <code>body { … }</code> rule.<br> As they are defined on the<br> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:root" rel="noopener"><code>:root</code> CSS pseudo-class</a>—a<br> selector that in HTML represents the <code></code> element<br> and is identical to the selector <code>html</code>, except that its specificity is<br> higher—they cascade down, which serves me for declaring global CSS variables.</p><div><pre class="language-css"><code class="language-css"><span class="token comment">/* style.css */</span><br><span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">color-scheme</span><span class="token punctuation">:</span> light dark<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">body</span> <span class="token punctuation">{</span><br>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--background-color<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><p>In the code sample above, you will probably have noticed a property<br> <a href="https://drafts.csswg.org/css-color-adjust-1/#propdef-color-scheme" rel="noopener"><code>color-scheme</code></a><br> with the space-separated value <code>light dark</code>.</p><p>This tells the browser which color themes my app supports<br> and allows it to activate special variants of the user agent stylesheet,<br> which is useful to, for example, let the browser render form fields<br> with a dark background and light text, adjust the scroll bars,<br> or to enable a theme-aware highlight color.<br> The exact details of <code>color-scheme</code> are specified in<br> <a href="https://drafts.csswg.org/css-color-adjust-1/" rel="noopener">CSS Color Adjustment Module Level 1</a>.</p><div class="w-aside w-aside--note"><p>🌒 Read up more on<br> <a href="https://web.dev/color-scheme/">what <code>color-scheme</code> actually does</a>.</p></div><p>Everything else is then just a matter of defining CSS variables<br> for things that matter on my site.<br> Semantically organizing styles helps a lot when working with dark mode.<br> For example, rather than <code>-⁠-⁠highlight-yellow</code>, consider calling the variable<br> <code>-⁠-⁠accent-color</code>, as “yellow” may actually not be yellow in dark mode or vice versa.<br> Below is an example of some more variables that I use in my example.</p><div><pre class="language-css"><code class="language-css"><span class="token comment">/* dark.css */</span><br><span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">--color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>250<span class="token punctuation">,</span> 250<span class="token punctuation">,</span> 250<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>5<span class="token punctuation">,</span> 5<span class="token punctuation">,</span> 5<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--link-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token punctuation">,</span> 188<span class="token punctuation">,</span> 212<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--main-headline-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>233<span class="token punctuation">,</span> 30<span class="token punctuation">,</span> 99<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--accent-background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token punctuation">,</span> 188<span class="token punctuation">,</span> 212<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--accent-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>5<span class="token punctuation">,</span> 5<span class="token punctuation">,</span> 5<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><div><pre class="language-css"><code class="language-css"><span class="token comment">/* light.css */</span><br><span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">--color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>5<span class="token punctuation">,</span> 5<span class="token punctuation">,</span> 5<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>250<span class="token punctuation">,</span> 250<span class="token punctuation">,</span> 250<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--link-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 238<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--main-headline-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 192<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--accent-background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 238<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">--accent-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>250<span class="token punctuation">,</span> 250<span class="token punctuation">,</span> 250<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><h3 id="full-example"><span id="Full_example">Full example <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#full-example">#</a></span></h3><p>In the following <a href="https://dark-mode-baseline.glitch.me/" rel="noopener">Glitch</a> embed,<br> you can see the complete example that puts the concepts from above into practice.<br> Try toggling dark mode in your particular <a href="https://web.dev/prefers-color-scheme/#activating-dark-mode-in-the-operating-system">operating system’s settings</a><br> and see how the page reacts.</p><div style="height: 900px;width: 100%"></div><h3 id="loading-impact"><span id="Loading_impact">Loading impact <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#loading-impact">#</a></span></h3><p>When you play with this example, you can see<br> why I load my <code>dark.css</code> and <code>light.css</code> via media queries.<br> Try toggling dark mode and reload the page:<br> the particular currently non-matching stylesheets are still loaded, but with the lowest priority,<br> so that they never compete with resources that are needed by the site right now.</p><div class="w-aside w-aside--note"><p>😲 Read up more on<br> <a href="https://blog.tomayac.com/2018/11/08/why-browsers-download-stylesheets-with-non-matching-media-queries-180513" rel="noopener">why browsers download stylesheets with non-matching media queries</a>.</p></div><figure class="w-figure"> <img alt="Network loading diagram showing how in light mode the dark mode CSS gets loaded with lowest priority" height="417" loading="lazy" src="https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format" width="800"><figcaption class="w-figcaption">Site in light mode loads the dark mode CSS with lowest priority.</figcaption></figure><figure class="w-figure"> <img alt="Network loading diagram showing how in dark mode the light mode CSS gets loaded with lowest priority" height="417" loading="lazy" src="https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format" width="800"><figcaption class="w-figcaption">Site in dark mode loads the light mode CSS with lowest priority.</figcaption></figure><figure class="w-figure"> <img alt="Network loading diagram showing how in default light mode the dark mode CSS gets loaded with lowest priority" height="417" loading="lazy" src="https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format" width="800"><figcaption class="w-figcaption">Site in default light mode on a browser that doesn’t support <code>prefers-color-scheme</code> loads the dark mode CSS with lowest priority.</figcaption></figure><h3 id="reacting-on-dark-mode-changes"><span id="Reacting_on_dark_mode_changes">Reacting on dark mode changes <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#reacting-on-dark-mode-changes">#</a></span></h3><p>Like any other media query change, dark mode changes can be subscribed to via JavaScript.<br> You can use this to, for example, dynamically change the<br> <a href="https://developers.google.com/web/fundamentals/design-and-ux/browser-customization/#provide_great_icons_tiles" rel="noopener">favicon</a><br> of a page or change the<br> <a href="https://developers.google.com/web/fundamentals/design-and-ux/browser-customization/#meta_theme_color_for_chrome_and_opera" rel="noopener"><code><meta name="theme-color"></code></a><br> that determines the color of the URL bar in Chrome.<br> The <a href="https://web.dev/prefers-color-scheme/#full-example">full example</a> above shows this in action,<br> in order to see the theme color and favicon changes, open the<br> <a href="https://dark-mode-baseline.glitch.me/" rel="noopener">demo in a separate tab</a>.</p><div><pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> darkModeMediaQuery <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  darkModeMediaQuery<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> darkModeOn <span class="token operator">=</span> e<span class="token punctuation">.</span>matches<span class="token punctuation">;</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Dark mode is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>darkModeOn <span class="token operator">?</span> <span class="token string">'🌒 on'</span> <span class="token operator">:</span> <span class="token string">'☀️ off'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><h2 id="debugging-and-testing-dark-mode"><span id="Debugging_and_testing_dark_mode">Debugging and testing dark mode <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#debugging-and-testing-dark-mode">#</a></span></h2><h3 id="emulating-prefers-color-scheme-in-devtools"><span id="Emulating_prefers-color-scheme_in_DevTools">Emulating <code>prefers-color-scheme</code> in DevTools <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#emulating-prefers-color-scheme-in-devtools">#</a></span></h3><p>Switching the entire operating system’s color scheme can get annoying real quick,<br> so Chrome DevTools now allows you to emulate the user’s preferred color scheme<br> in a way that only affects the currently visible tab.<br> Open the <a href="https://developers.google.com/web/tools/chrome-devtools/command-menu" rel="noopener">Command Menu</a>, start typing <code>Rendering</code>, run the <code>Show Rendering</code> command, and then change the <strong>Emulate CSS media feature prefers-color-scheme</strong> option.</p><figure class="w-figure"> <img alt="A screenshot of the 'Emulate CSS media feature prefers-color-scheme' option that is located in the Rendering tab of Chrome DevTools" height="552" loading="lazy" src="https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format" width="800"><br></figure><h3 id="screenshotting-prefers-color-scheme-with-puppeteer"><span id="Screenshotting_prefers-color-scheme_with_Puppeteer">Screenshotting <code>prefers-color-scheme</code> with Puppeteer <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#screenshotting-prefers-color-scheme-with-puppeteer">#</a></span></h3><p><a href="https://github.com/GoogleChrome/puppeteer/" rel="noopener">Puppeteer</a> is a Node.js library<br> that provides a high-level API to control Chrome or Chromium over the<br> <a href="https://chromedevtools.github.io/devtools-protocol/" rel="noopener">DevTools Protocol</a>.<br> With <a href="https://www.npmjs.com/package/dark-mode-screenshot" rel="noopener"><code>dark-mode-screenshot</code></a>, we provide<br> a Puppeteer script that lets you create screenshots of your pages in both dark and light mode.<br> You can run this script as a one-off, or alternatively make it part of your<br> Continuous Integration (CI) test suite.</p><div><pre class="language-bash"><code class="language-bash">npx dark-mode-screenshot --url https://googlechromelabs.github.io/dark-mode-toggle/demo/ --output screenshot --fullPage --pause <span class="token number">750</span></code></pre></div><h2 id="dark-mode-best-practices"><span id="Dark_mode_best_practices">Dark mode best practices <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#dark-mode-best-practices">#</a></span></h2><h3 id="avoid-pure-white"><span id="Avoid_pure_white">Avoid pure white <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#avoid-pure-white">#</a></span></h3><p>A small detail you may have noticed is that I don’t use pure white.<br> Instead, to prevent glowing and bleeding against the surrounding dark content,<br> I choose a slightly darker white. Something like <code>rgb(250, 250, 250)</code> works well.</p><h3 id="re-colorize-and-darken-photographic-images"><span id="Re-colorize_and_darken_photographic_images">Re-colorize and darken photographic images <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#re-colorize-and-darken-photographic-images">#</a></span></h3><p>If you compare the two screenshots below, you will notice that not only the core theme has changed<br> from <em>dark-on-light</em> to <em>light-on-dark</em>, but that also the hero image looks slightly different.<br> My <a href="https://medium.com/dev-channel/re-colorization-for-dark-mode-19e2e17b584b" rel="noopener">user research</a><br> has shown that the majority of the surveyed people<br> prefer slightly less vibrant and brilliant images when dark mode is active.<br> I refer to this as <em>re-colorization</em>.</p><div class="w-columns"><figure class="w-figure"> <img alt="Hero image slightly darkened in dark mode." height="618" loading="lazy" src="https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format" width="800"><figcaption class="w-figcaption"> Hero image slightly darkened in dark mode.<br></figcaption></figure><figure class="w-figure"> <img alt="Regular hero image in light mode." height="618" loading="lazy" src="https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format" width="800"><figcaption class="w-figcaption"> Regular hero image in light mode.<br></figcaption></figure></div><p>Re-colorization can be achieved through a CSS filter on my images.<br> I use a CSS selector that matches all images that don’t have <code>.svg</code> in their URL,<br> the idea being that I can give vector graphics (icons) a different re-colorization treatment<br> than my images (photos), more about this in the <a href="https://web.dev/prefers-color-scheme/#vector-graphics-and-icons">next paragraph</a>.<br> Note how I again use a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/var" rel="noopener">CSS variable</a>,<br> so I can later on flexibly change my filter.</p><div class="w-aside w-aside--note"><p>🎨 Read up more on<br> <a href="https://medium.com/dev-channel/re-colorization-for-dark-mode-19e2e17b584b" rel="noopener">user research regarding re-colorization preferences with dark mode</a>.</p></div><p>As re-colorization is only needed in dark mode, that is, when <code>dark.css</code> is active,<br> there are no corresponding rules in <code>light.css</code>.</p><div><pre class="language-css"><code class="language-css"><span class="token comment">/* dark.css */</span><br><span class="token property">--image-filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token selector">;<br><br>img:not([src*=".svg"])</span> <span class="token punctuation">{</span><br>  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--image-filter<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><h4 id="customizing-dark-mode-re-colorization-intensities-with-javascript"><span id="Customizing_dark_mode_re-colorization_intensities_with_JavaScript">Customizing dark mode re-colorization intensities with JavaScript <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#customizing-dark-mode-re-colorization-intensities-with-javascript">#</a></span></h4><p>Not everyone is the same and people have different dark mode needs.<br> By sticking to the re-colorization method described above,<br> I can easily make the grayscale intensity a user preference that I can<br> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties#Values_in_JavaScript" rel="noopener">change via JavaScript</a>,<br> and by setting a value of <code>0%</code>, I can also disable re-colorization completely.<br> Note that <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement" rel="noopener"><code>document.documentElement</code></a><br> provides a reference to the root element of the document,<br> that is, the same element I can reference with the<br> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:root" rel="noopener"><code>:root</code> CSS pseudo-class</a>.</p><div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> filter <span class="token operator">=</span> <span class="token string">'grayscale(70%)'</span><span class="token punctuation">;</span><br>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--image-filter'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><h3 id="invert-vector-graphics-and-icons"><span id="Invert_vector_graphics_and_icons">Invert vector graphics and icons <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#invert-vector-graphics-and-icons">#</a></span></h3><p>For vector graphics—that in my case are used as icons that I reference via <code><img></code> elements—I<br> use a different re-colorization method.<br> While <a href="https://dl.acm.org/citation.cfm?id=2982168" rel="noopener">research</a> has shown<br> that people don’t like inversion for photos, it does work very well for most icons.<br> Again I use CSS variables to determine the inversion amount<br> in the regular and in the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:hover" rel="noopener"><code>:hover</code></a> state.</p><div class="w-columns"><figure class="w-figure"> <img alt="Icons are inverted in dark mode." height="48" loading="lazy" src="https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format" width="744"><figcaption class="w-figcaption"> Icons are inverted in dark mode.<br></figcaption></figure><figure class="w-figure"> <img alt="Regular icons in light mode." height="48" loading="lazy" src="https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format" width="744"><figcaption class="w-figcaption"> Regular icons in light mode.<br></figcaption></figure></div><p>Note how again I only invert icons in <code>dark.css</code> but not in <code>light.css</code>, and how <code>:hover</code><br> gets a different inversion intensity in the two cases to make the icon appear<br> slightly darker or slightly brighter, dependent on the mode the user has selected.</p><div><pre class="language-css"><code class="language-css"><span class="token comment">/* dark.css */</span><br><span class="token property">--icon-filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token property">--icon-filter_hover</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>40%<span class="token punctuation">)</span><span class="token selector">;<br><br>img[src*=".svg"]</span> <span class="token punctuation">{</span><br>  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--icon-filter<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><div><pre class="language-css"><code class="language-css"><span class="token comment">/* light.css */</span><br><span class="token property">--icon-filter_hover</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>60%<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><div><pre class="language-css"><code class="language-css"><span class="token comment">/* style.css */</span><br><span class="token selector">img[src*=".svg"]:hover</span> <span class="token punctuation">{</span><br>  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--icon-filter_hover<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><h3 id="use-currentcolor-for-inline-svgs"><span id="Use_currentColor_for_inline_SVGs">Use <code>currentColor</code> for inline SVGs <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#use-currentcolor-for-inline-svgs">#</a></span></h3><p>For <em>inline</em> SVG images, instead of <a href="https://web.dev/prefers-color-scheme/#invert-vector-graphics-and-icons">using inversion filters</a>,<br> you can leverage the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value#currentColor_keyword" rel="noopener"><code>currentColor</code></a><br> CSS keyword that represents the value of an element’s <code>color</code> property.<br> This lets you use the <code>color</code> value on properties that do not receive it by default.<br> Conveniently, if <code>currentColor</code> is used as the value of the SVG<br> <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Fills_and_Strokes#Fill_and_Stroke_Attributes" rel="noopener"><code>fill</code> or <code>stroke</code> attributes</a>,<br> it instead takes its value from the inherited value of the color property.<br> Even better: this also works for<br> <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use" rel="noopener"><code><svg><use href="%E2%80%A6"></use></svg></code></a>,<br> so you can have separate resources<br> and <code>currentColor</code> will still be applied in context.<br> Please note that this only works for <em>inline</em> or <code><use href="%E2%80%A6"></use></code> SVGs,<br> but not SVGs that are referenced as the <code>src</code> of an image or somehow via CSS.<br> You can see this applied in the demo below.</p><div><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token comment"></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">svg</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2000/svg<span class="token punctuation">"</span></span><br><mark class="highlight-line highlight-line-active">    <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentColor<span class="token punctuation">"</span></span></mark><br><span class="token punctuation">&gt;</span></span><br><span class="highlight-line">  […]</span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation"></span>svg</span><span class="token punctuation">&gt;</span></span></span></span></code></pre></div><div style="height: 950px;width: 100%"></div><h3 id="smooth-transitions-between-modes"><span id="Smooth_transitions_between_modes">Smooth transitions between modes <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#smooth-transitions-between-modes">#</a></span></h3><p>Switching from dark mode to light mode or vice versa can be smoothed thanks to the fact<br> that both <code>color</code> and <code>background-color</code> are<br> <a href="https://www.quackit.com/css/css3/animations/animatable_properties/" rel="noopener">animatable CSS properties</a>.<br> Creating the animation is as easy as declaring two <code>transition</code>s for the two properties.<br> The example below illustrates the overall idea, you can experience it live in the<br> <a href="https://dark-mode-baseline.glitch.me/" rel="noopener">demo</a>.</p><div><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span><br>  <span class="token property">--duration</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span><br>   <span class="token property">--timing</span><span class="token punctuation">:</span> ease<span class="token punctuation">;</span><br><br>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--background-color<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token property">transition</span><span class="token punctuation">:</span><br>    color <span class="token function">var</span><span class="token punctuation">(</span>--duration<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--timing<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    background-color <span class="token function">var</span><span class="token punctuation">(</span>--duration<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--timing<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div><h3 id="art-direction-with-dark-mode"><span id="Art_direction_with_dark_mode">Art direction with dark mode <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#art-direction-with-dark-mode">#</a></span></h3><p>While for loading performance reasons in general I recommend to exclusively work with <code>prefers-color-scheme</code><br> in the <code>media</code> attribute of <code><link></code> elements (rather than inline in stylesheets),<br> there are situations where you actually may want to work with <code>prefers-color-scheme</code> directly inline in your HTML code.<br> Art direction is such a situation.<br> On the web, art direction deals with the overall visual appearance of a page and how it communicates visually,<br> stimulates moods, contrasts features, and psychologically appeals to a target audience.</p><p>With dark mode, it’s up to the judgment of the designer to decide what is the best image at a particular mode<br> and whether <a href="https://web.dev/prefers-color-scheme/#photographic-images">re-colorization of images</a> is maybe <em>not</em> good enough.<br> If used with the <code><picture></picture></code> element, the <code><source></source></code> of the image to be shown can be made dependent on the <code>media</code> attribute.<br> In the example below, I show the Western hemisphere for dark mode, and the Eastern hemisphere for light mode<br> or when no preference is given, defaulting to the Eastern hemisphere in all other cases.<br> This is of course purely for illustrative purposes.<br> Toggle dark mode on your device to see the difference.</p><div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">picture</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">source</span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>western.webp<span class="token punctuation">"</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(prefers-color-scheme: dark)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">source</span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eastern.webp<span class="token punctuation">"</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(prefers-color-scheme: light)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eastern.webp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation"></span>picture</span><span class="token punctuation">&gt;</span></span></span></span></span></span></code></pre></div><div style="height: 600px;width: 100%"></div><h3 id="dark-mode-but-add-an-opt-out"><span id="Dark_mode_but_add_an_opt-out">Dark mode, but add an opt-out <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#dark-mode-but-add-an-opt-out">#</a></span></h3><p>As mentioned in the <a href="https://web.dev/prefers-color-scheme/#why-dark-mode">why dark mode</a> section above,<br> dark mode is an aesthetic choice for most users.<br> In consequence, some users may actually like to have their operating system UI<br> in dark, but still prefer to see their webpages the way they are used to seeing them.<br> A great pattern is to initially adhere to the signal the browser sends through<br> <code>prefers-color-scheme</code>, but to then optionally allow users to override their system-level setting.</p><h4 id="the-lessdark-mode-togglegreater-custom-element"><span id="The_custom_element">The <code><dark-mode-toggle></dark-mode-toggle></code> custom element <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#the-lessdark-mode-togglegreater-custom-element">#</a></span></h4><p>You can of course create the code for this yourself, but you can also just use<br> a ready-made custom element (web component) that I have created right for this purpose.<br> It’s called <a href="https://github.com/GoogleChromeLabs/dark-mode-toggle" rel="noopener"><code><dark-mode-toggle></dark-mode-toggle></code></a><br> and it adds a toggle (dark mode: on/off) or<br> a theme switcher (theme: light/dark) to your page that you can fully customize.<br> The demo below shows the element in action<br> (oh, and I have also 🤫 silently snuck it in all of the<br> <a href="https://dark-mode-baseline.glitch.me/" rel="noopener">other</a><br> <a href="https://dark-mode-currentcolor.glitch.me/" rel="noopener">examples</a><br> <a href="https://dark-mode-picture.glitch.me/" rel="noopener">above</a>).</p><div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">dark-mode-toggle</span><br>    <span class="token attr-name">legend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Theme Switcher<span class="token punctuation">"</span></span><br>    <span class="token attr-name">appearance</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switch<span class="token punctuation">"</span></span><br>    <span class="token attr-name">dark</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Dark<span class="token punctuation">"</span></span><br>    <span class="token attr-name">light</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Light<span class="token punctuation">"</span></span><br>    <span class="token attr-name">remember</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Remember this<span class="token punctuation">"</span></span><br><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation"></span>dark-mode-toggle</span><span class="token punctuation">&gt;</span></span></span></code></pre></div><div class="w-columns"><figure class="w-figure"> <img alt="&lt;dark-mode-toggle&gt; in light mode.” height=”76″ loading=”lazy” src=”https://web-dev.imgix.net/image/admin/Xy3uus69HnrkRPO4EuRu.png?auto=format” width=”140″ /&gt;&lt;figcaption class=" w-figcaption> <code><dark-mode-toggle></dark-mode-toggle></code> in light mode.<br></figure><figure class="w-figure"> <img alt="&lt;dark-mode-toggle&gt; in light mode.” height=”76″ loading=”lazy” src=”https://web-dev.imgix.net/image/admin/glRVRJpQ9hMip6MbqY9N.png?auto=format” width=”140″ /&gt;&lt;figcaption class=" w-figcaption> <code><dark-mode-toggle></dark-mode-toggle></code> in dark mode.<br></figure></div><p>Try clicking or tapping the dark mode controls in the upper right corner in the demo below.<br> If you check the checkbox in the third and the fourth control, see how your mode selection<br> is remembered even when you reload the page.<br> This allows your visitors to keep their operating system in dark mode,<br> but enjoy your site in light mode or vice versa.</p><div class="w-screenshot" style="height: 800px;width: 100%"></div><h2 id="conclusions"><span id="Conclusions">Conclusions <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#conclusions">#</a></span></h2><p>Working with and supporting dark mode is fun and opens up new design avenues.<br> For some of your visitors it can be the difference between not being able to handle your site<br> and being a happy user.<br> There are some pitfalls and careful testing is definitely required,<br> but dark mode is definitely a great opportunity for you to show that you care about all of your users.<br> The best practices mentioned in this post and helpers like the<br> <a href="https://github.com/GoogleChromeLabs/dark-mode-toggle" rel="noopener"><code><dark-mode-toggle></dark-mode-toggle></code></a> custom element<br> should make you confident in your ability to create an amazing dark mode experience.<br> <a href="https://twitter.com/tomayac" rel="noopener">Let me know on Twitter</a> what you create and if this post was useful<br> or also suggestions for improving it.<br> Thanks for reading! 🌒</p><h2 id="related-links"><span id="Related_links">Related links <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#related-links">#</a></span></h2><p>Resources for the <code>prefers-color-scheme</code> media query:</p><ul><li><a href="https://chromestatus.com/feature/5109758977638400" rel="noopener">Chrome Platform Status page</a></li><li><a href="https://crbug.com/889087" rel="noopener">Chromium bug</a></li><li><a href="https://drafts.csswg.org/mediaqueries-5/#prefers-color-scheme" rel="noopener">Media Queries Level 5 spec</a></li></ul><p>Resources for the <code>color-scheme</code> meta tag and CSS property:</p><ul><li><a href="https://web.dev/color-scheme/">The <code>color-scheme</code> CSS property and meta tag</a></li><li><a href="https://chromestatus.com/feature/5330651267989504" rel="noopener">Chrome Platform Status page</a></li><li><a href="http://crbug.com/925935" rel="noopener">Chromium bug</a></li><li><a href="https://drafts.csswg.org/css-color-adjust-1/" rel="noopener">CSS Color Adjustment Module Level 1 spec</a></li><li><a href="https://github.com/w3c/csswg-drafts/issues/3299" rel="noopener">CSS WG GitHub Issue for the meta tag and the CSS property</a></li><li><a href="https://github.com/whatwg/html/issues/4504" rel="noopener">HTML WHATWG GitHub Issue for the meta tag</a></li></ul><p>General dark mode links:</p><ul><li><a href="https://material.io/design/color/dark-theme.html" rel="noopener">Material Design—Dark Theme</a></li><li><a href="https://webkit.org/blog/8892/dark-mode-in-web-inspector/" rel="noopener">Dark Mode in Web Inspector</a></li><li><a href="https://webkit.org/blog/8840/dark-mode-support-in-webkit/" rel="noopener">Dark Mode Support in WebKit</a></li><li><a href="https://developer.apple.com/design/human-interface-guidelines/macos/visual-design/dark-mode/" rel="noopener">Apple Human Interface Guidelines—Dark Mode</a></li></ul><p>Background research articles for this post:</p><ul><li><a href="https://medium.com/dev-channel/what-does-dark-modes-supported-color-schemes-actually-do-69c2eacdfa1d" rel="noopener">What Does Dark Mode’s “supported-color-schemes” Actually Do? 🤔</a></li><li><a href="https://medium.com/dev-channel/let-there-be-darkness-maybe-9facd9c3023d" rel="noopener">Let there be darkness! 🌚 Maybe…</a></li><li><a href="https://medium.com/dev-channel/re-colorization-for-dark-mode-19e2e17b584b" rel="noopener">Re-Colorization for Dark Mode</a></li></ul><h2 id="acknowledgements"><span id="Acknowledgements">Acknowledgements <a class="w-headline-link" href="https://web.dev/prefers-color-scheme/#acknowledgements">#</a></span></h2><p>The <code>prefers-color-scheme</code> media feature, the <code>color-scheme</code> CSS property,<br> and the related meta tag are the implementation work of 👏 <a href="https://twitter.com/runeli" rel="noopener">Rune Lillesveen</a>.<br> Rune is also a co-editor of the <a href="https://drafts.csswg.org/css-color-adjust-1/" rel="noopener">CSS Color Adjustment Module Level 1</a> spec.<br> I would like to 🙏 thank <a href="https://www.linkedin.com/in/lukasz-zbylut/" rel="noopener">Lukasz Zbylut</a>,<br> <a href="https://twitter.com/rowan_m" rel="noopener">Rowan Merewood</a>,<br> <a href="https://www.linkedin.com/in/chiragd/" rel="noopener">Chirag Desai</a>,<br> and <a href="https://twitter.com/rob_dodson" rel="noopener">Rob Dodson</a><br> for their thorough reviews of this article.<br> The <a href="https://web.dev/prefers-color-scheme/#loading-strategy">loading strategy</a> is the brainchild of <a href="https://twitter.com/jaffathecake" rel="noopener">Jake Archibald</a>.<br> <a href="https://twitter.com/ecbos_" rel="noopener">Emilio Cobos Álvarez</a> has pointed me to the correct <code>prefers-color-scheme</code> detection method.<br> The tip with referenced SVGs and <code>currentColor</code> came from<br> <a href="https://twitter.com/xeenon" rel="noopener">Timothy Hatcher</a>.<br> Finally, I am thankful to the many anonymous participants of the various user studies<br> that have helped shape the recommendations in this article.<br> Hero image by <a href="https://unsplash.com/photos/kujXUuh1X0o" rel="noopener">Nathan Anderson</a>.</p><p><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p><div class="clear"></div></div><div style="clear:both"></div></div></div></div><div class="col-md-4"><div class="row"><div id="sidebar" class="col-md-12"><div class="sidebar-box"><div class="widget-box"><header class="title"><div class="line"><h3>Calendar</h3></div></header><div id="calendar_wrap" class="calendar_wrap"><table id="wp-calendar" class="wp-calendar-table"><caption>November 2021</caption><thead><tr><th scope="col" title="Monday">M</th><th scope="col" title="Tuesday">T</th><th scope="col" title="Wednesday">W</th><th scope="col" title="Thursday">T</th><th scope="col" title="Friday">F</th><th scope="col" title="Saturday">S</th><th scope="col" title="Sunday">S</th></tr></thead><tbody><tr><td><a href="https://sadewadee.pages.dev/en/2021/11/01/" aria-label="Posts published on November 1, 2021">1</a></td><td><a href="https://sadewadee.pages.dev/en/2021/11/02/" aria-label="Posts published on November 2, 2021">2</a></td><td><a href="https://sadewadee.pages.dev/en/2021/11/03/" aria-label="Posts published on November 3, 2021">3</a></td><td id="today"><a href="https://sadewadee.pages.dev/en/2021/11/04/" aria-label="Posts published on November 4, 2021">4</a></td><td>5</td><td>6</td><td>7</td></tr><tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr><tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr><tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr><tr><td>29</td><td>30</td><td class="pad" colspan="5"> </td></tr></tbody></table><nav aria-label="Previous and next months" class="wp-calendar-nav"> <span class="wp-calendar-nav-prev"><a href="https://sadewadee.pages.dev/en/2021/10/">« Oct</a></span> <span class="pad"> </span> <span class="wp-calendar-nav-next"> </span></nav></div></div><div class="widget-box"><header class="title"><div class="line"><h3>Archives</h3></div></header><ul><li><a href="https://sadewadee.pages.dev/en/2021/11/">November 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/10/">October 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/08/">August 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/07/">July 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/06/">June 2021</a></li></ul></div><div class="widget-box"><header class="title"><div class="line"><h3>Categories</h3></div></header><ul><li class="cat-item cat-item-18"><a href="https://sadewadee.pages.dev/en/category/improve-article/">Improve article</a></li><li class="cat-item cat-item-19"><a href="https://sadewadee.pages.dev/en/category/performance/">Performance</a></li><li class="cat-item cat-item-16"><a href="https://sadewadee.pages.dev/en/category/tech/">Tech</a></li><li class="cat-item cat-item-1"><a href="https://sadewadee.pages.dev/en/category/uncategorized/">Uncategorized</a></li><li class="cat-item cat-item-21"><a href="https://sadewadee.pages.dev/en/category/wordpress/">Wordpress</a></li></ul></div></div></div></div></div><div class="clear"></div></div></div><footer id="footer"><div class="container"><div class="row copyright"><div class="col-md-6"><p> Copyright Dev Tech 2021                                                | By <a href="https://www.themeinprogress.com/" target="_blank">Theme in Progress</a> | <a href="http://wordpress.org/" title="A Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress</a></p></div><div class="col-md-6"><div class="socials"></div></div></div></div></footer></div><div id="trp-floater-ls" onclick="" data-no-translation class="trp-language-switcher-container trp-floater-ls-names trp-bottom-right trp-color-dark"><div id="trp-floater-ls-current-language" class="trp-with-flags"> <a href="#" class="trp-floater-ls-disabled-language trp-ls-disabled-language" onclick="event.preventDefault()"> <img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/en_US.png" width="18" height="12" alt="en_US" title="English">English </a></div><div id="trp-floater-ls-language-list" class="trp-with-flags"><div class="trp-language-wrap"> <a href="https://sadewadee.pages.dev/id/prefers-color-scheme-hello-darkness-my-old-friend/" title="Indonesian"> <img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/id_ID.png" width="18" height="12" alt="id_ID" title="Indonesian">Indonesian </a> <a href="#" class="trp-floater-ls-disabled-language trp-ls-disabled-language" onclick="event.preventDefault()"><img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/en_US.png" width="18" height="12" alt="en_US" title="English">English</a></div></div></div> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/dist/vendor/regenerator-runtime.min.js?ver=0.13.7" id="regenerator-runtime-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/dist/vendor/wp-polyfill.min.js?ver=3.15.0" id="wp-polyfill-js"></script> <script type="text/javascript" id="contact-form-7-js-extra">var wpcf7 = {"api":{"root":"https:\/\/sadewadee.pages.dev\/en\/wp-json\/","namespace":"contact-form-7\/v1"},"cached":"1"};</script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/contact-form-7/includes/js/index.js?ver=5.4.2" id="contact-form-7-js"></script> <script type="text/javascript" id="toc-front-js-extra">var tocplus = {"smooth_scroll":"1","visibility_show":"show","visibility_hide":"hide","visibility_hide_by_default":"1","width":"Auto"};</script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/table-of-contents-plus/front.min.js?ver=2106" id="toc-front-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.easing.js?ver=1.3" id="jquery-easing-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.tinynav.js?ver=1.1" id="jquery-tinynav-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.tipsy.js?ver=1.0.0a" id="jquery-tipsy-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/prettyPhoto.js?ver=3.1.4" id="prettyPhoto-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/imagesloaded.min.js?ver=4.1.4" id="imagesloaded-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/masonry.min.js?ver=4.2.2" id="masonry-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/template.js?ver=1.0.0" id="alhena-lite-template-js"></script> </body></html>
