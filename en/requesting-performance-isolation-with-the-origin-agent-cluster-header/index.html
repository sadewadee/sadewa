<!DOCTYPE html>
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.2, user-scalable=yes"><link media="all" href="https://sadewadee.pages.dev/contents/cache/autoptimize/css/autoptimize_904e795ae94549568eec2a0ea733e69d.css" rel="stylesheet"><title>Requesting performance isolation with the Origin-Agent-Cluster header | Dev Tech | Optin Labs</title><meta name="robots" content="max-image-preview:large"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="alternate" type="application/rss+xml" title="Dev Tech » Feed" href="https://sadewadee.pages.dev/en/feed/"><link rel="alternate" type="application/rss+xml" title="Dev Tech » Comments Feed" href="https://sadewadee.pages.dev/en/comments/feed/"><link rel="alternate" type="application/rss+xml" title="Dev Tech » Requesting performance isolation with the Origin-Agent-Cluster header Comments Feed" href="https://sadewadee.pages.dev/en/requesting-performance-isolation-with-the-origin-agent-cluster-header/feed/"><link rel="stylesheet" id="google-fonts-css" href="https://fonts.googleapis.com/css?family=Raleway%3A400%2C700%2C500%2C600%2C300%2C200%2C100%2C800%2C900%7CRoboto%3A400%2C700%2C400italic%2C500%2C500italic%2C300italic%2C300%2C100italic%2C100%2C700italic%2C900%2C900italic%7CKristi&amp;subset=latin%2Clatin-ext&amp;ver=1.0.0" type="text/css" media="all"> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/jquery/jquery.min.js?ver=3.6.0" id="jquery-core-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/jquery/jquery-migrate.min.js?ver=3.3.2" id="jquery-migrate-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/wp-automatic/js/main-front.js?ver=5.8.1" id="wp_automatic_gallery-js"></script>  <link rel="alternate" type="application/json" href="https://sadewadee.pages.dev/en/wp-json/wp/v2/posts/128"><link rel="alternate" type="application/json+oembed" href="https://sadewadee.pages.dev/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fsadewadee.pages.dev%2Fen%2Frequesting-performance-isolation-with-the-origin-agent-cluster-header%2F"><link rel="alternate" type="text/xml+oembed" href="https://sadewadee.pages.dev/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fsadewadee.pages.dev%2Fen%2Frequesting-performance-isolation-with-the-origin-agent-cluster-header%2F&amp;format=xml"><link rel="canonical" href="https://sadewadee.pages.dev/en/requesting-performance-isolation-with-the-origin-agent-cluster-header/"><meta name="description" content="A new HTTP response header to limit domain-wide scripting and request dedicated resources from the browser.Feb 1, 2021Origin-Agent-Cluster is a new HTTP response header that instructs the browser to prevent synchronous scripting access between same-site cross-origin pages. Browsers may also use ... | Your problem is our pleasure."> <script type="application/ld+json">{"@context":"https:\/\/schema.org","@graph":[{"@type":"WPHeader","url":"https:\/\/sadewadee.pages.dev\/en\/requesting-performance-isolation-with-the-origin-agent-cluster-header\/","headline":"Requesting performance isolation with the Origin-Agent-Cluster header | Dev Tech | Optin Labs","description":"A new HTTP response header to limit domain-wide scripting and request dedicated resources from the browser.Feb 1, 2021Origin-Agent-Cluster is a new HTTP response header that instructs the browser to prevent synchronous scripting access between same-site cross-origin pages. Browsers may also use ... | Your problem is our pleasure."},{"@type":"WPFooter","url":"https:\/\/sadewadee.pages.dev\/en\/requesting-performance-isolation-with-the-origin-agent-cluster-header\/","headline":"Requesting performance isolation with the Origin-Agent-Cluster header | Dev Tech | Optin Labs","description":"A new HTTP response header to limit domain-wide scripting and request dedicated resources from the browser.Feb 1, 2021Origin-Agent-Cluster is a new HTTP response header that instructs the browser to prevent synchronous scripting access between same-site cross-origin pages. Browsers may also use ... | Your problem is our pleasure.","copyrightYear":"2021"},{"@type":"Organization","@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization","url":"https:\/\/sadewadee.pages.dev","name":"Dev Tech"},{"@type":"WebSite","@id":"https:\/\/sadewadee.pages.dev\/#schema-website","url":"https:\/\/sadewadee.pages.dev","name":"Blog Teknologi Indonesia","encoding":"UTF-8","potentialAction":{"@type":"SearchAction","target":"https:\/\/sadewadee.pages.dev\/en\/search\/{search_term_string}\/","query-input":"required name=search_term_string"}},{"@type":"WebPage","@id":"https:\/\/sadewadee.pages.dev\/en\/requesting-performance-isolation-with-the-origin-agent-cluster-header\/#schema-webpage","isPartOf":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-website"},"publisher":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization"},"url":"https:\/\/sadewadee.pages.dev\/en\/requesting-performance-isolation-with-the-origin-agent-cluster-header\/"},{"@type":"Article","mainEntityOfPage":{"@id":"https:\/\/sadewadee.pages.dev\/en\/requesting-performance-isolation-with-the-origin-agent-cluster-header\/#schema-webpage"},"author":{"@type":"Person","@id":"https:\/\/sadewadee.pages.dev\/en\/author\/sadewadee\/#schema-author","name":"sadewadee","url":"https:\/\/sadewadee.pages.dev\/en\/author\/sadewadee\/"},"publisher":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization"},"dateModified":"2021-07-02T08:06:57","datePublished":"2021-07-02T08:06:57","headline":"Requesting performance isolation with the Origin-Agent-Cluster header | Dev Tech | Optin Labs","description":"A new HTTP response header to limit domain-wide scripting and request dedicated resources from the browser.Feb 1, 2021Origin-Agent-Cluster is a new HTTP response header that instructs the browser to prevent synchronous scripting access between same-site cross-origin pages. Browsers may also use ... | Your problem is our pleasure.","name":"Requesting performance isolation with the Origin-Agent-Cluster header"}]}</script> <meta property="og:type" content="article"><meta property="og:url" content="https://sadewadee.pages.dev/en/requesting-performance-isolation-with-the-origin-agent-cluster-header/"><meta property="og:title" content="Requesting performance isolation with the Origin-Agent-Cluster header | Dev Tech | Optin Labs"><meta property="og:description" content="A new HTTP response header to limit domain-wide scripting and request dedicated resources from the browser.Feb 1, 2021Origin-Agent-Cluster is a new HTTP response header that instructs the browser to prevent synchronous scripting access between same-site cross-origin pages. Browsers may also use ... | Your problem is our pleasure."><meta property="og:image" content="https://web-dev.imgix.net/image/admin/HXHbHrl9qxcxCQK90yIc.jpg?auto=format&amp;fit=crop&amp;h=64&amp;w=64"><meta property="article:published_time" content="2021-07-02T08:06:57"><meta property="article:author" content="sadewadee"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Requesting performance isolation with the Origin-Agent-Cluster header | Dev Tech | Optin Labs"><meta name="twitter:description" content="A new HTTP response header to limit domain-wide scripting and request dedicated resources from the browser.Feb 1, 2021Origin-Agent-Cluster is a new HTTP response header that instructs the browser to prevent synchronous scripting access between same-site cross-origin pages. Browsers may also use ... | Your problem is our pleasure."><meta name="twitter:image" content="https://web-dev.imgix.net/image/admin/HXHbHrl9qxcxCQK90yIc.jpg?auto=format&amp;fit=crop&amp;h=64&amp;w=64"><link rel="alternate" hreflang="en-US" href="https://sadewadee.pages.dev/en/requesting-performance-isolation-with-the-origin-agent-cluster-header/"><link rel="alternate" hreflang="en" href="https://sadewadee.pages.dev/en/requesting-performance-isolation-with-the-origin-agent-cluster-header/"><link rel="alternate" hreflang="id-ID" href="https://sadewadee.pages.dev/id/requesting-performance-isolation-with-the-origin-agent-cluster-header/"><link rel="alternate" hreflang="id" href="https://sadewadee.pages.dev/id/requesting-performance-isolation-with-the-origin-agent-cluster-header/"><link rel="icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-32x32.png" sizes="32x32"><link rel="icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-192x192.png" sizes="192x192"><link rel="apple-touch-icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-180x180.png"><meta name="msapplication-TileImage" content="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-270x270.png"></head><body class="post-template-default single single-post postid-128 single-format-standard translatepress-en_US custombody light"> <script>var thisClass = $(this).attr("w-article-header");
	jQuery(document).ready(function($) {
$('header.' + thisClass).remove();
	});</script> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><div id="wrapper"><header class="header"><div class="container"><div class="row"><div class="col-md-2"><div id="logo"> <a href="https://sadewadee.pages.dev/en/" class="logo" title="Dev Tech">Dev Tech</a></div></div><div class="col-md-10"><nav id="mainmenu"><ul id="menu-main" class="menu"><li id="menu-item-77" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-77"><a href="http://optinlabs.my.id/blogs">Home</a></li><li id="menu-item-76" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-76"><a href="https://sadewadee.pages.dev/en/category/tech/">Tech</a></li></ul></nav></div></div></div></header><div id="content" class="container main-content page"><div class="row"><div class="col-md-8 right-sidebar"><div class="row"><div class="post-128 post type-post status-publish format-standard hentry category-performance category-tech post-container col-md-12"><div class="post-article"><header class="title"><div class="line"><h1 class="title">Requesting performance isolation with the Origin-Agent-Cluster header</h1></div></header><div class="entry-info"> <span> <i class="fa fa-clock-o"></i>July 2, 2021</span> <span class="entry-standard"><i class="fa fa-pencil-square-o"></i>Article</span></div><div><header class="w-article-header"><p>A new HTTP response header to limit domain-wide scripting and request dedicated resources from the browser.</p><p><time>Feb 1, 2021</time></p><div class="w-authors w-mt--xl w-pt--sm"><div class="w-author"><a href="https://sadewadee.pages.dev/authors/domenic"><img alt="Domenic Denicola" class="w-author__image" height="64" src="https://web-dev.imgix.net/image/admin/HXHbHrl9qxcxCQK90yIc.jpg?auto=format&amp;fit=crop&amp;h=64&amp;w=64" width="64" loading="lazy" decoding="async" sizes="(min-width: 64px) 64px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/HXHbHrl9qxcxCQK90yIc.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=1&amp;q=75 ,https://web-dev.imgix.net/image/admin/HXHbHrl9qxcxCQK90yIc.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=2&amp;q=50 2x,https://web-dev.imgix.net/image/admin/HXHbHrl9qxcxCQK90yIc.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=3&amp;q=35 3x,https://web-dev.imgix.net/image/admin/HXHbHrl9qxcxCQK90yIc.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=4&amp;q=23 4x,https://web-dev.imgix.net/image/admin/HXHbHrl9qxcxCQK90yIc.jpg?fit=crop&amp;h=64&amp;w=64&amp;auto=format&amp;dpr=5&amp;q=20 5x"></a></div></div></header><p><code>Origin-Agent-Cluster</code> is a new HTTP response header that instructs the browser to prevent synchronous scripting access between same-site cross-origin pages. Browsers may also use <code>Origin-Agent-Cluster</code> as a hint that your origin should get its own, separate resources, such as a dedicated process.</p><div id="toc_container" class="no_bullets"><p class="toc_title">Contents</p><ul class="toc_list"><li><a href="#Browser_compatibility"><span class="toc_number toc_depth_1">1</span> Browser compatibility #</a></li><li><a href="#Why_browsers_can8217t_automatically_segregate_same-site_origins"><span class="toc_number toc_depth_1">2</span> Why browsers can’t automatically segregate same-site origins #</a></li><li><a href="#What_origin-keyed_pages_cannot_do"><span class="toc_number toc_depth_1">3</span> What origin-keyed pages cannot do #</a></li><li><a href="#When_to_use_origin-keyed_agent_clusters"><span class="toc_number toc_depth_1">4</span> When to use origin-keyed agent clusters #</a><ul><li><a href="#How_is_this_related_to_cross-origin_isolation"><span class="toc_number toc_depth_2">4.1</span> How is this related to cross-origin isolation? #</a></li></ul></li><li><a href="#How_to_use_the_Origin-Agent-Cluster_header"><span class="toc_number toc_depth_1">5</span> How to use the Origin-Agent-Cluster header #</a></li><li><a href="#Origin-keying_is_not_a_security_feature"><span class="toc_number toc_depth_1">6</span> Origin-keying is not a security feature #</a></li><li><a href="#Feedback"><span class="toc_number toc_depth_1">7</span> Feedback #</a></li><li><a href="#Learn_more"><span class="toc_number toc_depth_1">8</span> Learn more #</a></li></ul></div><h2 id="browser-compatibility"><span id="Browser_compatibility">Browser compatibility <a href="#browser-compatibility" class="w-headline-link">#</a></span></h2><p>Currently the <code>Origin-Agent-Cluster</code> header is only implemented in Chrome 88 onward. It was designed in close collaboration with representatives from Mozilla Firefox who have marked it as <a href="https://mozilla.github.io/standards-positions/#domenic-origin-isolation" rel="noopener">worth prototyping</a>, and has <a href="https://lists.webkit.org/pipermail/webkit-dev/2020-August/031355.html" rel="noopener">a preliminary positive reception</a> from representatives of WebKit, the browser engine used by Safari.</p><p>But in the meantime, there’s no problem with deploying the <code>Origin-Agent-Cluster</code> header to all your users today. Browsers which don’t understand it will just ignore it. And, since pages in origin-keyed agent clusters can actually do <a href="#limitations">fewer things</a> than site-keyed ones (the default), there’s no interoperability issue to be worried about.</p><h2 id="why-browsers-can't-automatically-segregate-same-site-origins"><span id="Why_browsers_can8217t_automatically_segregate_same-site_origins">Why browsers can’t automatically segregate same-site origins <a href="#why-browsers-can't-automatically-segregate-same-site-origins" class="w-headline-link">#</a></span></h2><p>The web is built on the <a href="https://sadewadee.pages.dev/same-origin-policy/">same-origin policy</a>, which is a security feature that restricts how documents and scripts can interact with resources from another <a href="https://sadewadee.pages.dev/same-site-same-origin/#origin">origin</a>. For example, a page hosted at <code>https://a.example</code> is at a different origin from one at <code>https://b.example</code>, or one at <code>https://sub.a.example</code>.</p><p>Behind the scenes, browsers use the separation that origins provide in different ways. In the old days, even though separate origins would not be able to access each other’s data, they would still share resources like operating system threads, processes, and memory allocation. This meant that if one tab was slow, it would slow down all the other tabs. Or if one tab used too much memory, it would crash the entire browser.</p><p>These days browsers are more sophisticated, and try to separate different origins into different processes. How exactly this works varies per browser: most browsers have some level of separation between tabs, but different iframes inside a single tab might share a process. And because processes come with some memory overhead, they use heuristics to avoid spawning too many: for example, Firefox has a <a href="https://support.mozilla.org/en-US/kb/performance-settings" rel="noopener">user-configurable process limit</a>, and Chrome varies its behavior between desktop (where memory is more plentiful) and mobile (where it is scarce).</p><p>These heuristics are not perfect. And they suffer from an important limitation: because there are exceptions to the same-origin policy which allow subdomains like <code>https://sub.a.example</code> and <code>https://a.example</code> to talk to each other, browsers cannot automatically segregate subdomains from each other.</p><div class="w-aside w-aside--note"><p>The technical distinction here is that the browser cannot automatically segregate pages which are same-site to each other, even if they are cross-origin. The most common cases of same-site cross-origin pages happen with subdomains, but see the article <a href="https://sadewadee.pages.dev/same-site-same-origin/">Understanding “same-site” and “same-origin”</a> for more.</p></div><p>This default behavior is called “site-keyed agent clusters”: that is, the browser groups pages based on their <em>site</em>. The new <code>Origin-Agent-Cluster</code> header asks the browser to change this default behavior for a given page, putting it into an <em>origin</em>-keyed agent cluster, so that it is grouped only with other pages that have the exact same origin. In particular, same-site cross-origin pages will be excluded from the agent cluster.</p><p>This opt-in separation allows browsers to give these new origin-keyed agent clusters their own dedicated resources, which are not combined with those of other origins. For example, such pages could get their own process, or be scheduled on separate threads. By adding the <code>Origin-Agent-Cluster</code> header to your page, you’re indicating to the browser that the page would benefit from such dedicated resources.</p><p>However, in order to perform the separation, and get these benefits, the browser needs to disable some legacy features.</p><h2 id="limitations"><span id="What_origin-keyed_pages_cannot_do">What origin-keyed pages cannot do <a href="#limitations" class="w-headline-link">#</a></span></h2><p>When your page is in an origin-keyed agent cluster, you give up some abilities to talk to same-site cross-origin pages that were previously available. In particular:</p><ul><li><p>You can no longer set <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/domain" rel="noopener"><code>document.domain</code></a>. This is a legacy feature that normally allows same-site cross-origin pages to synchronously access each other’s DOM, but in origin-keyed agent clusters, it is disabled.</p></li><li><p>You can no longer send <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Module" rel="noopener"><code>WebAssembly.Module</code></a> objects to other same-site cross-origin pages via <code>postMessage()</code>.</p></li><li><p>(Chrome-only) You can no longer send <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer" rel="noopener"><code>SharedArrayBuffer</code></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Memory" rel="noopener"><code>WebAssembly.Memory</code></a> objects to other same-site cross-origin pages.</p></li></ul><div class="w-aside w-aside--caution"><div style="clear:both; margin-top:0em; margin-bottom:1em;"><a href="https://sadewadee.pages.dev/en/minify-and-compress-network-payloads-with-gzip/" target="_blank" rel="nofollow" class="u98886c04b5e4ddf0d2b9afdc1ce0d224"><div style="padding-left:1em; padding-right:1em;"><span class="ctaText">READ Also : </span>  <span class="postTitle">Minify and compress network payloads with gzip</span></div></a></div><p><strong>Caution</strong>: Chrome is the only browser that allows sending <code>SharedArrayBuffer</code> and <code>WebAssembly.Memory</code> objects to same-site cross-origin pages. Other browsers, and <a href="https://groups.google.com/a/chromium.org/g/blink-dev/c/1NKvbIj3dq4/m/Vgfisu5HAwAJ" rel="noopener">future versions of Chrome</a>, will prevent sending these objects across the origin boundary regardless of whether the agent cluster is origin-keyed or site-keyed.</p></div><h2 id="when-to-use-origin-keyed-agent-clusters"><span id="When_to_use_origin-keyed_agent_clusters">When to use origin-keyed agent clusters <a href="#when-to-use-origin-keyed-agent-clusters" class="w-headline-link">#</a></span></h2><p>The origins that most benefit from the <code>Origin-Agent-Cluster</code> header are those that:</p><ul><li><p>Perform best with their own dedicated resources when possible. Examples include performance-intensive games, video conferencing sites, or multimedia creation apps.</p></li><li><p>Contains resource-intensive iframes that are different-origin, but same-site. For example, if <code>https://mail.example.com</code> embeds <code>https://chat.example.com</code> iframes, origin-keying <code>https://mail.example.com/</code> ensures that the code written by the chat team cannot accidentally interfere with code written by the mail team, and can hint to the browser to give them separate processes to schedule them independently and decrease their performance impact on each other.</p></li><li><p>Expect to be embedded on different-origin, same-site pages, but know themselves to be resource-intensive. For example, if <code>https://customerservicewidget.example.com</code> expects to use lots of resources for video chat, and will be embedded on various origins throughout <code>https://*.example.com</code>, the team maintaining that widget could use the <code>Origin-Agent-Cluster</code> header to try to decrease their performance impact on embedders.</p></li></ul><p>Additionally, you’ll also need to make sure you’re OK disabling the above-discussed <a href="#limitations">rarely-used cross-origin communication features</a>, and that your site is <a href="https://sadewadee.pages.dev/why-https-matters/">using HTTPS</a>.</p><p>But in the end, these are just guidelines. Whether origin-keyed agent clusters will help your site or not is ultimately best determined through measurements. In particular, you’ll want to <a href="https://sadewadee.pages.dev/vitals-measurement-getting-started/">measure your Web Vitals</a>, and potentially your <a href="https://sadewadee.pages.dev/monitor-total-page-memory-usage/">memory usage</a>, to see what impact origin-keying has. (Memory usage in particular is a potential concern, as increasing the number of processes in play can cause more per-process memory overhead.) You shouldn’t just roll out origin-keying and hope for the best.</p><h3 id="cross-origin-isolation"><span id="How_is_this_related_to_cross-origin_isolation">How is this related to cross-origin isolation? <a href="#cross-origin-isolation" class="w-headline-link">#</a></span></h3><p>Origin-keying of agent clusters via the <code>Origin-Agent-Cluster</code> header is related to, but separate from, <a href="https://sadewadee.pages.dev/coop-coep/">cross-origin isolation</a> via the <code>Cross-Origin-Opener-Policy</code> and <code>Cross-Origin-Embedder-Policy</code> headers.</p><p>Any site which makes itself cross-origin isolated will also disable the same <a href="#limitations">same-site cross-origin communications features</a> as when using the <code>Origin-Agent-Cluster</code> header. However, the <code>Origin-Agent-Cluster</code> header can still be useful on top of cross-origin isolation, as an additional hint to the browser to modify its resource allocation heuristics. So you should still consider applying the <code>Origin-Agent-Cluster</code> header, and measuring the results, even on pages that are already cross-origin isolated.</p><h2 id="how-to-use"><span id="How_to_use_the_Origin-Agent-Cluster_header">How to use the <code>Origin-Agent-Cluster</code> header <a href="#how-to-use" class="w-headline-link">#</a></span></h2><p>To use the <code>Origin-Agent-Cluster</code> header, configure your web server to send the following HTTP response header:</p><p><web-copy-code></web-copy-code></p><pre class="language-http"><code class="language-http"> ?1</code></pre><p></p><p>The value of <code>?1</code> is the <a href="https://www.fastly.com/blog/improve-http-structured-headers" rel="noopener">structured header</a> syntax for a boolean <code>true</code> value.</p><p>It’s important to send this header on <em>all</em> responses from your origin, not just some pages. Otherwise, you can get inconsistent results, where the browser “remembers” seeing an origin-keying request and so it origin-keys even on pages that don’t ask for it. Or the reverse: if the first page a user visits doesn’t have the header, then the browser will remember that your origin does not want to be origin-keyed, and will ignore the header on subsequent pages.</p><div class="w-aside w-aside--caution"><p><strong>Caution</strong>: Don’t forget to send the header on error pages, like your 404 page!</p></div> <details class="w-details"> <summary class="w-details__summary"></summary><p>The reason for this “memory” is to ensure consistency of keying for an origin. If some pages on an origin were origin-keyed, while others weren’t, then you could have two same-origin pages which were put into different agent clusters, and thus weren’t allowed to talk to each other. This would be very strange, both for web developers and for the internals of the browser. So, the specification for <code>Origin-Agent-Cluster</code> instead ignores the header if it’s inconsistent with what it’s previously seen for a given origin. In Chrome, this will result in a console warning.</p><div style="clear:both; margin-top:0em; margin-bottom:1em;"><a href="https://sadewadee.pages.dev/en/building-a-color-scheme/" target="_blank" rel="nofollow" class="u8d49ddfbd4dcdd5f6145803e11f53023"><div style="padding-left:1em; padding-right:1em;"><span class="ctaText">READ Also : </span>  <span class="postTitle">Building a color scheme</span></div></a></div><p>This consistency is scoped to a browsing context group, which is a group of tabs, windows, or iframes which can all reach each other via mechanisms like <code>window.opener</code>, <code>frames[0]</code>, or <code>window.parent</code>. This means that, once an origin’s origin- or site-keying has been settled (by the browser either seeing, or not seeing, the header), changing it requires opening up an entirely new tab, not connected to the old one in any way.</p><p>These details can be important for testing the <code>Origin-Agent-Cluster</code> header. When first adding it to your site, just reloading the page will not work; you’ll need to close the tab and open a new one.</p> </details><p>To check whether the <code>Origin-Agent-Cluster</code> header is applied, use the JavaScript <code>window.originAgentCluster</code> property. This will be <code>true</code> in cases where the header (or other mechanisms, like <a href="#cross-origin-isolation">cross-origin isolation</a>) caused origin-keying; <code>false</code> when it did not; and <code>undefined</code> in browsers that don’t implement the <code>Origin-Agent-Cluster</code> header. Logging this data to your analytics platform can provide a valuable check that you’ve configured your server correctly.</p><p>Finally, note that the <code>Origin-Agent-Cluster</code> header will only work on <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts" rel="noopener">secure contexts</a>, i.e. on HTTPS pages or on <code>http://localhost</code>. Non-localhost HTTP pages do <em>not</em> support origin-keyed agent clusters.</p><h2 id="origin-keying-is-not-a-security-feature"><span id="Origin-keying_is_not_a_security_feature">Origin-keying is not a security feature <a href="#origin-keying-is-not-a-security-feature" class="w-headline-link">#</a></span></h2><p>While using an origin-keyed agent cluster does isolate your origin from synchronous access from same-site cross-origin pages, it does not give the <a href="https://sadewadee.pages.dev/why-coop-coep/">protection</a> of security-related headers like <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cross-Origin_Resource_Policy_(CORP)" rel="noopener"><code>Cross-Origin-Resource-Policy</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy" rel="noopener"><code>Cross-Origin-Opener-Policy</code></a>. In particular, it is not a reliable protection against side channel attacks like <a href="https://en.wikipedia.org/wiki/Spectre_(security_vulnerability)" rel="noopener">Spectre</a>.</p><p>This might be a bit surprising, because origin-keying can sometimes cause your origin to get its own process, and separate processes are an important defence against side-channel attacks. But remember that the <code>Origin-Agent-Cluster</code> header is only a hint in that regard. The browser is under no obligation to give your origin a separate process, and it might not do so for a variety of reasons:</p><ul><li><p>A browser might not implement the technology to do so. For example, currently Safari and Firefox can put separate tabs into their own processes, but cannot yet do so for iframes.</p></li><li><p>The browser might decide it’s not worth the overhead of a separate process. For example, on low-memory Android devices, or in Android WebView, Chrome uses as few processes as possible.</p></li><li><p>The browser might want to respect the request that the <code>Origin-Agent-Cluster</code> header indicates, but it could do so using different isolation technology than processes. For example, Chrome is <a href="https://docs.google.com/document/d/12wEWJsZmxVnNwVGuxuEJF4922OWUr4fCs1xKHi9mTiI/edit?usp=sharing" rel="noopener">exploring</a> using threads instead of processes for this sort of performance isolation.</p></li><li><p>The user, or code running on a different site, might have already navigated to a site-keyed page on your origin, causing the <a href="#how-to-use">consistency guarantee</a> to kick in and the <code>Origin-Agent-Cluster</code> header to be ignored entirely.</p></li></ul><p>For these reasons, it’s important not to think of origin-keyed agent clusters as a security feature. Instead, it’s a way of helping the browser prioritize resource allocation, by hinting that your origin would benefit from dedicated resources (and that you’re willing to give up <a href="#limitations">certain features</a> in exchange).</p><h2 id="feedback"><span id="Feedback">Feedback <a href="#feedback" class="w-headline-link">#</a></span></h2><p>The Chrome team would love to hear from you if you’re using, or considering using, the <code>Origin-Agent-Cluster</code> header. Your public interest and support helps us prioritize features and show other browser vendors how important they are. Tweet at <a href="https://twitter.com/chromiumdev" rel="noopener">@ChromiumDev</a> and let Chrome DevRel know your thoughts and experiences.</p><p>If you have more questions about the specification, or the details of how the feature works, you can file an issue on the <a href="https://github.com/whatwg/html" rel="noopener">HTML Standard GitHub repository</a>. And if you encounter any issues with Chrome’s implementation, you can file a bug at <a href="https://bugs.chromium.org/p/chromium/issues/entry?components=Internals%3ESandbox%3ESiteIsolation" rel="noopener">new.crbug.com</a> with the Components field set to <code>Internals&gt;Sandbox&gt;SiteIsolation</code>.</p><h2 id="learn-more"><span id="Learn_more">Learn more <a href="#learn-more" class="w-headline-link">#</a></span></h2><p>To learn more about origin-keyed agent clusters, you can dive into the details at these links:</p><div class="w-mb--l w-mt--l w-post-github-link"><span class="w-mr--sm">Last updated: <time>Feb 1, 2021</time></span><a href="https://github.com/GoogleChrome/web.dev/blob/master/src/site/content/en/blog/origin-agent-cluster/index.md">Improve article</a></div><p><web-feedback additional-questions=""></web-feedback></p></div><p><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p><div class="clear"></div></div><div style="clear:both"></div></div></div></div><div class="col-md-4"><div class="row"><div id="sidebar" class="col-md-12"><div class="sidebar-box"><div class="widget-box"><header class="title"><div class="line"><h3>Calendar</h3></div></header><div id="calendar_wrap" class="calendar_wrap"><table id="wp-calendar" class="wp-calendar-table"><caption>November 2021</caption><thead><tr><th scope="col" title="Monday">M</th><th scope="col" title="Tuesday">T</th><th scope="col" title="Wednesday">W</th><th scope="col" title="Thursday">T</th><th scope="col" title="Friday">F</th><th scope="col" title="Saturday">S</th><th scope="col" title="Sunday">S</th></tr></thead><tbody><tr><td><a href="https://sadewadee.pages.dev/en/2021/11/01/" aria-label="Posts published on November 1, 2021">1</a></td><td><a href="https://sadewadee.pages.dev/en/2021/11/02/" aria-label="Posts published on November 2, 2021">2</a></td><td><a href="https://sadewadee.pages.dev/en/2021/11/03/" aria-label="Posts published on November 3, 2021">3</a></td><td id="today"><a href="https://sadewadee.pages.dev/en/2021/11/04/" aria-label="Posts published on November 4, 2021">4</a></td><td>5</td><td>6</td><td>7</td></tr><tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr><tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr><tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr><tr><td>29</td><td>30</td><td class="pad" colspan="5"> </td></tr></tbody></table><nav aria-label="Previous and next months" class="wp-calendar-nav"> <span class="wp-calendar-nav-prev"><a href="https://sadewadee.pages.dev/en/2021/10/">« Oct</a></span> <span class="pad"> </span> <span class="wp-calendar-nav-next"> </span></nav></div></div><div class="widget-box"><header class="title"><div class="line"><h3>Archives</h3></div></header><ul><li><a href="https://sadewadee.pages.dev/en/2021/11/">November 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/10/">October 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/08/">August 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/07/">July 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/06/">June 2021</a></li></ul></div><div class="widget-box"><header class="title"><div class="line"><h3>Categories</h3></div></header><ul><li class="cat-item cat-item-18"><a href="https://sadewadee.pages.dev/en/category/improve-article/">Improve article</a></li><li class="cat-item cat-item-19"><a href="https://sadewadee.pages.dev/en/category/performance/">Performance</a></li><li class="cat-item cat-item-16"><a href="https://sadewadee.pages.dev/en/category/tech/">Tech</a></li><li class="cat-item cat-item-1"><a href="https://sadewadee.pages.dev/en/category/uncategorized/">Uncategorized</a></li><li class="cat-item cat-item-21"><a href="https://sadewadee.pages.dev/en/category/wordpress/">Wordpress</a></li></ul></div></div></div></div></div><div class="clear"></div></div></div><footer id="footer"><div class="container"><div class="row copyright"><div class="col-md-6"><p> Copyright Dev Tech 2021                                                | By <a href="https://www.themeinprogress.com/" target="_blank">Theme in Progress</a> | <a href="http://wordpress.org/" title="A Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress</a></p></div><div class="col-md-6"><div class="socials"></div></div></div></div></footer></div><div id="trp-floater-ls" onclick="" data-no-translation class="trp-language-switcher-container trp-floater-ls-names trp-bottom-right trp-color-dark"><div id="trp-floater-ls-current-language" class="trp-with-flags"> <a href="#" class="trp-floater-ls-disabled-language trp-ls-disabled-language" onclick="event.preventDefault()"> <img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/en_US.png" width="18" height="12" alt="en_US" title="English">English </a></div><div id="trp-floater-ls-language-list" class="trp-with-flags"><div class="trp-language-wrap"> <a href="https://sadewadee.pages.dev/id/requesting-performance-isolation-with-the-origin-agent-cluster-header/" title="Indonesian"> <img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/id_ID.png" width="18" height="12" alt="id_ID" title="Indonesian">Indonesian </a> <a href="#" class="trp-floater-ls-disabled-language trp-ls-disabled-language" onclick="event.preventDefault()"><img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/en_US.png" width="18" height="12" alt="en_US" title="English">English</a></div></div></div> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/dist/vendor/regenerator-runtime.min.js?ver=0.13.7" id="regenerator-runtime-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/dist/vendor/wp-polyfill.min.js?ver=3.15.0" id="wp-polyfill-js"></script> <script type="text/javascript" id="contact-form-7-js-extra">var wpcf7 = {"api":{"root":"https:\/\/sadewadee.pages.dev\/en\/wp-json\/","namespace":"contact-form-7\/v1"},"cached":"1"};</script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/contact-form-7/includes/js/index.js?ver=5.4.2" id="contact-form-7-js"></script> <script type="text/javascript" id="toc-front-js-extra">var tocplus = {"smooth_scroll":"1","visibility_show":"show","visibility_hide":"hide","visibility_hide_by_default":"1","width":"Auto"};</script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/table-of-contents-plus/front.min.js?ver=2106" id="toc-front-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.easing.js?ver=1.3" id="jquery-easing-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.tinynav.js?ver=1.1" id="jquery-tinynav-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.tipsy.js?ver=1.0.0a" id="jquery-tipsy-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/prettyPhoto.js?ver=3.1.4" id="prettyPhoto-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/imagesloaded.min.js?ver=4.1.4" id="imagesloaded-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/masonry.min.js?ver=4.2.2" id="masonry-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/template.js?ver=1.0.0" id="alhena-lite-template-js"></script> </body></html>
