<!DOCTYPE html>
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.2, user-scalable=yes"><link media="all" href="https://sadewadee.pages.dev/contents/cache/autoptimize/css/autoptimize_3d825140440db513d0e04c66ef236f2a.css" rel="stylesheet"><title>Minify and compress network payloads with gzip | Dev Tech | Optin Labs</title><meta name="robots" content="max-image-preview:large"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="alternate" type="application/rss+xml" title="Dev Tech ¬ª Feed" href="https://sadewadee.pages.dev/en/feed/"><link rel="alternate" type="application/rss+xml" title="Dev Tech ¬ª Comments Feed" href="https://sadewadee.pages.dev/en/comments/feed/"><link rel="alternate" type="application/rss+xml" title="Dev Tech ¬ª Minify and compress network payloads with gzip Comments Feed" href="https://sadewadee.pages.dev/en/minify-and-compress-network-payloads-with-gzip/feed/"><link rel="stylesheet" id="google-fonts-css" href="https://fonts.googleapis.com/css?family=Raleway%3A400%2C700%2C500%2C600%2C300%2C200%2C100%2C800%2C900%7CRoboto%3A400%2C700%2C400italic%2C500%2C500italic%2C300italic%2C300%2C100italic%2C100%2C700italic%2C900%2C900italic%7CKristi&amp;subset=latin%2Clatin-ext&amp;ver=1.0.0" type="text/css" media="all"> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/jquery/jquery.min.js?ver=3.6.0" id="jquery-core-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/jquery/jquery-migrate.min.js?ver=3.3.2" id="jquery-migrate-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/wp-automatic/js/main-front.js?ver=5.8.1" id="wp_automatic_gallery-js"></script>  <link rel="alternate" type="application/json" href="https://sadewadee.pages.dev/en/wp-json/wp/v2/posts/54"><link rel="alternate" type="application/json+oembed" href="https://sadewadee.pages.dev/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fsadewadee.pages.dev%2Fen%2Fminify-and-compress-network-payloads-with-gzip%2F"><link rel="alternate" type="text/xml+oembed" href="https://sadewadee.pages.dev/en/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fsadewadee.pages.dev%2Fen%2Fminify-and-compress-network-payloads-with-gzip%2F&amp;format=xml"><link rel="canonical" href="https://sadewadee.pages.dev/en/minify-and-compress-network-payloads-with-gzip/"><meta name="description" content="Apr 24, 2018This codelab uses Chrome DevTools. Download Chrome if you don't already have it.This codelab explores how both minifying and compressing the JavaScript bundle for the following application improves page performance by reducing the app's request size.Measure #Since webpack i ... | Your problem is our pleasure."> <script type="application/ld+json">{"@context":"https:\/\/schema.org","@graph":[{"@type":"WPHeader","url":"https:\/\/sadewadee.pages.dev\/en\/minify-and-compress-network-payloads-with-gzip\/","headline":"Minify and compress network payloads with gzip | Dev Tech | Optin Labs","description":"Apr 24, 2018This codelab uses Chrome DevTools. Download Chrome if you don&#039;t already have it.This codelab explores how both minifying and compressing the JavaScript bundle for the following application improves page performance by reducing the app&#039;s request size.Measure #Since webpack i ... | Your problem is our pleasure."},{"@type":"WPFooter","url":"https:\/\/sadewadee.pages.dev\/en\/minify-and-compress-network-payloads-with-gzip\/","headline":"Minify and compress network payloads with gzip | Dev Tech | Optin Labs","description":"Apr 24, 2018This codelab uses Chrome DevTools. Download Chrome if you don&#039;t already have it.This codelab explores how both minifying and compressing the JavaScript bundle for the following application improves page performance by reducing the app&#039;s request size.Measure #Since webpack i ... | Your problem is our pleasure.","copyrightYear":"2021"},{"@type":"Organization","@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization","url":"https:\/\/sadewadee.pages.dev","name":"Dev Tech"},{"@type":"WebSite","@id":"https:\/\/sadewadee.pages.dev\/#schema-website","url":"https:\/\/sadewadee.pages.dev","name":"Blog Teknologi Indonesia","encoding":"UTF-8","potentialAction":{"@type":"SearchAction","target":"https:\/\/sadewadee.pages.dev\/en\/search\/{search_term_string}\/","query-input":"required name=search_term_string"}},{"@type":"WebPage","@id":"https:\/\/sadewadee.pages.dev\/en\/minify-and-compress-network-payloads-with-gzip\/#schema-webpage","isPartOf":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-website"},"publisher":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization"},"url":"https:\/\/sadewadee.pages.dev\/en\/minify-and-compress-network-payloads-with-gzip\/"},{"@type":"Article","mainEntityOfPage":{"@id":"https:\/\/sadewadee.pages.dev\/en\/minify-and-compress-network-payloads-with-gzip\/#schema-webpage"},"author":{"@type":"Person","@id":"https:\/\/sadewadee.pages.dev\/en\/author\/sadewadee\/#schema-author","name":"sadewadee","url":"https:\/\/sadewadee.pages.dev\/en\/author\/sadewadee\/"},"publisher":{"@id":"https:\/\/sadewadee.pages.dev\/#schema-publishing-organization"},"dateModified":"2021-06-14T05:40:20","datePublished":"2021-06-14T05:40:17","headline":"Minify and compress network payloads with gzip | Dev Tech | Optin Labs","description":"Apr 24, 2018This codelab uses Chrome DevTools. Download Chrome if you don&#039;t already have it.This codelab explores how both minifying and compressing the JavaScript bundle for the following application improves page performance by reducing the app&#039;s request size.Measure #Since webpack i ... | Your problem is our pleasure.","name":"Minify and compress network payloads with gzip","image":{"@type":"ImageObject","@id":"https:\/\/sadewadee.pages.dev\/en\/minify-and-compress-network-payloads-with-gzip\/#schema-article-image","url":"https:\/\/sadewadee.pages.dev\/contents\/uploads\/2021\/06\/Ga0pUShY7cQ0BDAPgPuh.png","height":1085,"width":1622},"thumbnailUrl":"https:\/\/sadewadee.pages.dev\/contents\/uploads\/2021\/06\/Ga0pUShY7cQ0BDAPgPuh.png"}]}</script> <meta property="og:type" content="article"><meta property="og:url" content="https://sadewadee.pages.dev/en/minify-and-compress-network-payloads-with-gzip/"><meta property="og:title" content="Minify and compress network payloads with gzip | Dev Tech | Optin Labs"><meta property="og:description" content="Apr 24, 2018This codelab uses Chrome DevTools. Download Chrome if you don't already have it.This codelab explores how both minifying and compressing the JavaScript bundle for the following application improves page performance by reducing the app's request size.Measure #Since webpack i ... | Your problem is our pleasure."><meta property="og:image" content="https://sadewadee.pages.dev/contents/uploads/2021/06/Ga0pUShY7cQ0BDAPgPuh.png"><meta property="og:image:width" content="1622"><meta property="og:image:height" content="1085"><meta property="article:published_time" content="2021-06-14T05:40:17"><meta property="article:author" content="sadewadee"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Minify and compress network payloads with gzip | Dev Tech | Optin Labs"><meta name="twitter:description" content="Apr 24, 2018This codelab uses Chrome DevTools. Download Chrome if you don't already have it.This codelab explores how both minifying and compressing the JavaScript bundle for the following application improves page performance by reducing the app's request size.Measure #Since webpack i ... | Your problem is our pleasure."><meta name="twitter:image" content="https://sadewadee.pages.dev/contents/uploads/2021/06/Ga0pUShY7cQ0BDAPgPuh.png"><link rel="alternate" hreflang="en-US" href="https://sadewadee.pages.dev/en/minify-and-compress-network-payloads-with-gzip/"><link rel="alternate" hreflang="en" href="https://sadewadee.pages.dev/en/minify-and-compress-network-payloads-with-gzip/"><link rel="alternate" hreflang="id-ID" href="https://sadewadee.pages.dev/id/minify-and-compress-network-payloads-with-gzip/"><link rel="alternate" hreflang="id" href="https://sadewadee.pages.dev/id/minify-and-compress-network-payloads-with-gzip/"><link rel="icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-32x32.png" sizes="32x32"><link rel="icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-192x192.png" sizes="192x192"><link rel="apple-touch-icon" href="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-180x180.png"><meta name="msapplication-TileImage" content="https://sadewadee.pages.dev/contents/uploads/2021/06/cropped-Tech.id_-270x270.png"></head><body class="post-template-default single single-post postid-54 single-format-standard translatepress-en_US custombody light"> <script>var thisClass = $(this).attr("w-article-header");
	jQuery(document).ready(function($) {
$('header.' + thisClass).remove();
	});</script> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><div id="wrapper"><header class="header"><div class="container"><div class="row"><div class="col-md-2"><div id="logo"> <a href="https://sadewadee.pages.dev/en/" class="logo" title="Dev Tech">Dev Tech</a></div></div><div class="col-md-10"><nav id="mainmenu"><ul id="menu-main" class="menu"><li id="menu-item-77" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-77"><a href="http://optinlabs.my.id/blogs">Home</a></li><li id="menu-item-76" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-76"><a href="https://sadewadee.pages.dev/en/category/tech/">Tech</a></li></ul></nav></div></div></div></header><div id="content" class="container main-content page"><div class="row"><div class="col-md-8 right-sidebar"><div class="row"><div class="post-54 post type-post status-publish format-standard has-post-thumbnail hentry category-tech post-container col-md-12"><div class="media-container"><img src="https://sadewadee.pages.dev/contents/uploads/2021/06/Ga0pUShY7cQ0BDAPgPuh-940x429.png" class="attachment-blog size-blog wp-post-image" alt="" loading="lazy"></div><div class="post-article"><header class="title"><div class="line"><h1 class="title">Minify and compress network payloads with gzip</h1></div></header><div class="entry-info"> <span> <i class="fa fa-clock-o"></i>June 14, 2021</span> <span class="entry-standard"><i class="fa fa-pencil-square-o"></i>Article</span></div><div><p><time>Apr 24, 2018</time></p><div class="w-authors w-mt--xl w-pt--sm"><div class="w-author"><a href="https://sadewadee.pages.dev/authors/houssein"></a></div></div><div class="w-aside w-aside--note"><p>This codelab uses Chrome DevTools. <a href="https://www.google.com/chrome">Download Chrome</a> if you don‚Äôt already have it.</p></div><p>This codelab explores how both minifying and compressing the JavaScript bundle for the following application improves page performance by reducing the app‚Äôs request size.</p><p><img alt="App screenshot" src="https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format" height="535" width="800" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/admin/Ga0pUShY7cQ0BDAPgPuh.png?auto=format&amp;w=1600 1600w"></p><div id="toc_container" class="no_bullets"><p class="toc_title">Contents</p><ul class="toc_list"><li><a href="#Measure"><span class="toc_number toc_depth_1">1</span> Measure #</a></li><li><a href="#Minification"><span class="toc_number toc_depth_1">2</span> Minification #</a></li><li><a href="#Compression"><span class="toc_number toc_depth_1">3</span> Compression #</a></li><li><a href="#Dynamic_compression"><span class="toc_number toc_depth_1">4</span> Dynamic compression #</a><ul><li><a href="#Pros"><span class="toc_number toc_depth_2">4.1</span> Pros #</a></li><li><a href="#Cons"><span class="toc_number toc_depth_2">4.2</span> Cons #</a></li><li><a href="#Dynamic_compression_with_NodeExpress"><span class="toc_number toc_depth_2">4.3</span> Dynamic compression with Node/Express #</a></li></ul></li><li><a href="#Static_compression"><span class="toc_number toc_depth_1">5</span> Static compression #</a><ul><li><a href="#Pros-2"><span class="toc_number toc_depth_2">5.1</span> Pros #</a></li><li><a href="#Cons-2"><span class="toc_number toc_depth_2">5.2</span> Cons #</a></li><li><a href="#Static_compression_with_NodeExpress_and_webpack"><span class="toc_number toc_depth_2">5.3</span> Static compression with Node/Express and webpack #</a></li></ul></li><li><a href="#Conclusion"><span class="toc_number toc_depth_1">6</span> Conclusion #</a></li></ul></div><h2 id="measure"><span id="Measure">Measure <a href="#measure" class="w-headline-link">#</a></span></h2><div class="w-aside w-aside--note"><p>Since webpack is used in this application, any changes made to the code will trigger a new build which can take a few seconds. Once it completes, you should see your changes reflected in the application.</p></div><p>Before diving in to add optimizations, it‚Äôs always a good idea to first analyze the current state of the application.</p><ul><li>To preview the site, press <strong>View¬†App</strong>. Then press <strong>Fullscreen</strong> <img alt="fullscreen" src="https://sadewadee.pages.dev/images/glitch/fullscreen.svg" style="padding: 4px 8px; opacity: .5; border: 1px solid #c3c3c3; border-radius: 5px;">.</li></ul><p>This app, which was also covered in the <a href="https://sadewadee.pages.dev/remove-unused-code">‚ÄúRemove unused code‚Äù</a> codelab, lets you vote for your favorite kitten. üêà</p><p>Now take a look at how large this application is:</p><ol><li>Press <code>Control+Shift+J</code> (or <code>Command+Option+J</code> on Mac) to open DevTools.</li><li>Click the <strong>Network</strong> tab.</li><li>Select the <strong>Disable cache</strong> checkbox.</li><li>Reload the app.</li></ol><p><img alt="Original bundle size in Network panel" src="https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format" height="186" width="800" class="w-screenshot" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/admin/Zzm8kiE2W29yGEZC7C2u.png?auto=format&amp;w=1600 1600w"></p><p>Although a lot of progress was made in the <a href="https://sadewadee.pages.dev/remove-unused-code">‚ÄúRemove unused code‚Äù</a> codelab to trim this bundle size down, 225 KB is still quite large.</p><h2 id="minification"><span id="Minification">Minification <a href="#minification" class="w-headline-link">#</a></span></h2><p>Consider the following block of code.</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">soNice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number"></span><span class="token punctuation">;</span><p><span class="token keyword">while</span> <span class="token punctuation">(</span>counter <span class="token operator"> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nice'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>counter<span class="token operator">++</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token punctuation">}</span></span></p></code></pre><p></p><p>If this function is saved in a file of its own, the file size is around <strong>112 B (bytes).</strong></p><p>If all whitespace is removed, the resulting code looks like this:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">soNice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">let</span> counter<span class="token operator">=</span><span class="token number"></span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>counter<span class="token operator"><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"nice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>counter<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span></code></pre><p></p><p>The file size would now be around 83 B. If it gets further mangled by reducing the length of variable name and modifying some expressions, the final code may end up looking like this:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">soNice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number"></span><span class="token punctuation">;</span>i<span class="token operator"><span class="token number">100</span><span class="token punctuation">;</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"nice"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">++</span><span class="token punctuation">}</span></span></code></pre><p></p><p>The file size now reaches <strong>62 B</strong>.</p><p>With each step, the code is becoming harder to read. However, the browser‚Äôs JavaScript engine interprets each of these in the exact same way. The benefit of obfuscating code in this manner can help achieve smaller file sizes. 112 B really was not much to begin with, but there was still a 50% reduction in size!</p><p>In this application, <a href="https://webpack.js.org/">webpack</a> version 4 is used as a module bundler. The specific version can be seen in <code>package.json</code>.</p><p><web-copy-code></web-copy-code></p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  </span><br><mark class="highlight-line highlight-line-active"><span class="token property">"webpack"</span><span class="token operator">:</span> <span class="token string">"^4.16.4"</span><span class="token punctuation">,</span></mark><br><span class="highlight-line">  </span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p></p><p>Version 4 already minifies the bundle by default during production mode. It uses <code>TerserWebpackPlugin</code> a plugin for <a href="https://github.com/terser-js/terser">Terser</a>. Terser is a popular tool used to compress JavaScript code.</p><p>To get an idea of what the minified code looks like, go ahead and click <code>main.bundle.js</code> while still in the DevTools <strong>Network</strong> panel. Now click the <strong>Response</strong> tab.</p><p><img alt="Minified response" src="https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format" height="249" width="800" class="w-screenshot" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/admin/uti2q15O2MtiEsegYoV9.png?auto=format&amp;w=1600 1600w"></p><p>The code in its final form, minified and mangled, is shown in the response body. To find out how large the bundle may have been if it was not minified, open <code>webpack.config.js</code> and update the <code>mode</code> configuration.</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><del class="highlight-line highlight-line-remove">  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span></del><br><br><span class="highlight-line">  </span></code></pre><p></p><p>Reload the application and take a look at the bundle size again through the DevTools <strong>Network</strong> panel</p><p><img alt="Bundle size of 767 KB" src="https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format" height="129" width="700" class="w-screenshot" loading="lazy" decoding="async" sizes="(min-width: 700px) 700px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/admin/H0lINRmM2gF6NHnzmkGM.png?auto=format&amp;w=1400 1400w"></p><p>That‚Äôs a pretty big difference! üòÖ</p><p>Make sure to revert the changes here before continuing.</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><br><del class="highlight-line highlight-line-remove">  mode<span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span></del><br><span class="highlight-line">  </span></code></pre><p></p><p>Including a process to minify code in your application depends on the tools that you use:</p><ul><li>If webpack v4 or greater is used, no additional work needs to be done since code is minified by default in production mode. üëç</li><li>If an older version of webpack is used, install and include <code>TerserWebpackPlugin</code> into the webpack build process. The <a href="https://webpack.js.org/plugins/terser-webpack-plugin/">documentation</a> explains this in detail.</li><li>Other minification plugins also exist and can be used instead, such as <a href="https://github.com/webpack-contrib/babel-minify-webpack-plugin">BabelMinifyWebpackPlugin</a> and <a href="https://github.com/roman01la/webpack-closure-compiler">ClosureCompilerPlugin</a>.</li><li>If a module bundler is not being used at all, use <a href="https://github.com/terser-js/terser">Terser</a> as a CLI tool or include it directly as a dependency.</li></ul><div style="clear:both; margin-top:0em; margin-bottom:1em;"><a href="https://sadewadee.pages.dev/en/next-generation-web-styling/" target="_blank" rel="nofollow" class="u3240d2c6c054387a23098c07dd77ebeb"><div style="padding-left:1em; padding-right:1em;"><span class="ctaText">READ Also : </span>¬† <span class="postTitle">Next-generation web styling</span></div></a></div><h2 id="compression"><span id="Compression">Compression <a href="#compression" class="w-headline-link">#</a></span></h2><div class="w-aside w-aside--warning"><p><strong>Warning</strong>: Many hosting platforms, CDNs and reverse proxy servers either encode assets with compression by default or allow you to easily configure them. This means that you may rarely ever need to set up your server similar to how it is done in the compression section of this tutorial, but you can continue to read if you are interested in learning how compression works.</p></div><p>Although the term ‚Äúcompression‚Äù is sometimes loosely used to explain how code is reduced during the minification process, it isn‚Äôt actually compressed in the literal sense.</p><p><strong>Compression</strong> usually refers to code that has been modified using a data compression algorithm. Unlike minification which ends up providing perfectly valid code, compressed code needs to be <em>decompressed</em> before being used.</p><p>With every HTTP request and response, browsers and web servers can add <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers">headers</a> to include additional information about the asset being fetched or received. This can be seen in the <code>Headers</code> tab within the DevTools Network panel where three types are shown:</p><ul><li><strong>General</strong> represents general headers relevant to the entire request-response interaction.</li><li><strong>Response Headers</strong> shows a list of headers specific to the actual response from the server.</li><li><strong>Request Headers</strong> shows a list of headers attached to the request by the client.</li></ul><p>Take a look at the <code>accept-encoding</code> header in the <code>Request Headers</code>.</p><p><img alt="Accept encoding header" src="https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format" height="361" width="800" class="w-screenshot" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/admin/shmaD9cmjjFMITKL0TAW.png?auto=format&amp;w=1600 1600w"></p><p><code>accept-encoding</code> is used by the browser to specify which content encoding formats, or compression algorithms, it supports. There are many text-compression algorithms out there, but there are only three that are supported here for the compression (and decompression) of HTTP network requests:</p><ul><li><a href="https://www.gzip.org/">Gzip</a> (<code>gzip</code>): The most widely used compression format for server and client interactions. It builds on top of the Deflate algorithm and is supported in all current browsers.</li><li>Deflate (<code>deflate</code>): Not commonly used.</li><li><a href="https://github.com/google/brotli">Brotli</a> (<code>br</code>): A newer compression algorithm that aims to further improve compression ratios, which can result in even faster page loads. It is supported in the <a href="https://caniuse.com/#feat=brotli">latest versions of most browsers</a>.</li></ul><p>The sample application in this tutorial is identical to the app completed in the <a href="https://sadewadee.pages.dev/remove-unused-code">‚ÄúRemove unused code‚Äù</a> codelab except for the fact that <a href="https://expressjs.com/">Express</a> is now used as a server framework. In the next few sections, both static and dynamic compression is explored.</p><h2 id="dynamic-compression"><span id="Dynamic_compression">Dynamic compression <a href="#dynamic-compression" class="w-headline-link">#</a></span></h2><p><strong>Dynamic</strong> compression involves compressing assets on-the-fly as they get requested by the browser.</p><h3 id="pros"><span id="Pros">Pros <a href="#pros" class="w-headline-link">#</a></span></h3><ul><li>Creating and updating saved compressed versions of assets does not need to be done.</li><li>Compressing on-the-fly works especially well for web pages that are dynamically generated.</li></ul><h3 id="cons"><span id="Cons">Cons <a href="#cons" class="w-headline-link">#</a></span></h3><ul><li>Compressing files at higher levels to achieve better compression ratios takes longer. This can cause a performance hit as the user waits for assets to compress before they are sent by the server.</li></ul><h3 id="dynamic-compression-with-nodeexpress"><span id="Dynamic_compression_with_NodeExpress">Dynamic compression with Node/Express <a href="#dynamic-compression-with-nodeexpress" class="w-headline-link">#</a></span></h3><p>The <code>server.js</code> file is responsible for setting up the Node server that hosts the application.</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><p><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></p><p>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></p><p><span class="token keyword">const</span> listener <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Your app is listening on port '</span> <span class="token operator">+</span> listener<span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></p></code></pre><p></p><p>All this currently does is import <code>express</code> and use the <code>express.static</code> middleware to load all the static HTML, JS and CSS files in the <code>public/</code> directory (and those files are created by webpack with every build).</p><p>To make sure all of the assets are compressed every time they‚Äôre requested, the <a href="https://github.com/expressjs/compression">compression</a> middleware library can be used. Begin by adding it as a <code>devDependency</code> in <code>package.json</code>:</p><p><web-copy-code></web-copy-code></p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  </span><br><mark class="highlight-line highlight-line-active"><span class="token property">"compression"</span><span class="token operator">:</span> <span class="token string">"^1.7.3"</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span></code></pre><p></p><p>And import it into the server file, <code>server.js</code>:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><mark class="highlight-line highlight-line-active"><span class="token keyword">const</span> compression <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'compression'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></mark></code></pre><p></p><div style="clear:both; margin-top:0em; margin-bottom:1em;"><a href="https://sadewadee.pages.dev/en/three-logical-css-functions-to-use-today/" target="_blank" rel="nofollow" class="u3a7e3c42fcb1a9d9e478774bbccb1523"><div style="padding-left:1em; padding-right:1em;"><span class="ctaText">READ Also : </span>¬† <span class="postTitle">three logical CSS functions to use today</span></div></a></div><p>And add it as a middleware <strong>before</strong> <code>express.static</code> is mounted:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="highlight-line"></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">compression</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></mark><br><span class="highlight-line"></span><br><span class="highlight-line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"></span></code></pre><p></p><p>Now reload the app and take a look at the bundle size in the <strong>Network</strong> panel.</p><p><img alt="Bundle size with dynamic compression" src="https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format" height="161" width="800" class="w-screenshot" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/admin/MMtTKWPKfht8RYd8BMYF.png?auto=format&amp;w=1600 1600w"></p><p>From 225 KB to 61.6 KB! In the <code>Response Headers</code> now, a <code>content-encoding</code> header shows that the server is sending down this file encoded with <code>gzip</code>.</p><p><img alt="Content encoding header" src="https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format" height="470" width="800" class="w-screenshot" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/admin/523FjNSQOK95lGzg0B6D.png?auto=format&amp;w=1600 1600w"></p><h2 id="static-compression"><span id="Static_compression">Static compression <a href="#static-compression" class="w-headline-link">#</a></span></h2><p>The idea behind <strong>static</strong> compression is to have assets compressed and saved ahead of time.</p><h3 id="pros-2"><span id="Pros-2">Pros <a href="#pros-2" class="w-headline-link">#</a></span></h3><ul><li>Latency due to high compression levels is not a concern anymore. Nothing needs to happen on-the-fly to compress files as they can now be fetched directly.</li></ul><h3 id="cons-2"><span id="Cons-2">Cons <a href="#cons-2" class="w-headline-link">#</a></span></h3><ul><li>Assets need to compressed with every build. Build times can increase significantly if high compression levels are used.</li></ul><h3 id="static-compression-with-nodeexpress-and-webpack"><span id="Static_compression_with_NodeExpress_and_webpack">Static compression with Node/Express and webpack <a href="#static-compression-with-nodeexpress-and-webpack" class="w-headline-link">#</a></span></h3><p>Since static compression involves compressing files ahead of time, webpack settings can be modified to compress assets as part of the build step. <a href="https://github.com/webpack-contrib/compression-webpack-plugin"><code>CompressionPlugin</code></a> can be used for this.</p><p>Begin by adding it as a <code>devDependency</code> in <code>package.json</code>:</p><p><web-copy-code></web-copy-code></p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  </span><br><mark class="highlight-line highlight-line-active"><span class="token property">"compression-webpack-plugin"</span><span class="token operator">:</span> <span class="token string">"^1.1.11"</span></mark><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span></code></pre><p></p><p>Like any other webpack plugin, import it in the configurations file, <code>webpack.config.js:</code></p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"></span><br><span class="highlight-line"></span><br><mark class="highlight-line highlight-line-active"><span class="token keyword">const</span> CompressionPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"compression-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></mark></code></pre><p></p><p>And include it within the <code>plugins</code> array:</p><p><web-copy-code></web-copy-code></p><pre class="language-js"><code class="language-js"><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  </span><br><span class="highlight-line">  plugins<span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">    </span><br><mark class="highlight-line highlight-line-active"><span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></mark><br><span class="highlight-line">  <span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p></p><p>By default, the plugin compresses the build files using <code>gzip</code>. Take a look at the <a href="https://github.com/webpack-contrib/compression-webpack-plugin">documentation</a> to learn how to add options to use a different algorithm or include/exclude certain files.</p><p>When the app reloads and rebuilds, a compressed version of the main bundle is now created. Open the Glitch Console to take a look at what‚Äôs inside the final <code>public/</code> directory that‚Äôs served by the Node server.</p><div class="w-aside w-aside--note"><p>The <code>public/</code> directory is included in the <code>.gitignore</code> file. Directories that contain build files are usually included here in order to be ignored by Git, and Glitch also hides these files from the editor tree.</p></div><ul><li>Click the <strong>Tools</strong> button.</li><li>Click the <strong>Console</strong> button.</li><li>In the console, run the following commands to change into the <code>public</code> directory and see all of its files:</li></ul><p><web-copy-code></web-copy-code></p><pre class="language-bash"><code class="language-bash"><span class="token class-name builtin">cd</span> public<br><span class="token function">ls</span></code></pre><p><img alt="Final outputted files in public directory" src="https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format" height="188" width="800" class="w-screenshot" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/admin/YQwCT87xMfMwWiH63lTS.png?auto=format&amp;w=1600 1600w"></p><p>The gzipped version of the bundle, <code>main.bundle.js.gz</code>, is now saved here as well. <code>CompressionPlugin</code> also compresses <code>index.html</code> by default.</p><p>The next thing that needs to be done is tell the server to send these gzipped files whenever their original JS versions are being requested. This can be done by defining a new route in <code>server.js</code> before the files are served with <code>express.static</code>.</p><pre>
const express = require('express');
const app = express();

<strong>app.get('*.js', (req, res, next) =&gt; {
  req.url = req.url + '.gz';
  res.set('Content-Encoding', 'gzip');
  next();
});</strong>

app.use(express.static('public'));

//...
</pre><p><code>app.get</code> is used to tell the server how to respond to a GET request for a specific endpoint. A callback function is then used to define how to handle this request. The route works like this:</p><ul><li>Specifying <code>'*.js'</code> as the first argument means that this works for every endpoint that is fired to fetch a JS file.</li><li>Within the callback, <code>.gz</code> is attached to the URL of the request and the <code>Content-Encoding</code> response header is set to <code>gzip</code>.</li><li>Finally, <code>next()</code> ensures that the sequence continues to any callback that may be next.</li></ul><p>Once the app reloads, take a look at the <code>Network</code> panel once more.</p><p><img alt="Bundle size reduction with static compression" src="https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format" height="176" width="800" class="w-screenshot" loading="lazy" decoding="async" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" srcset="https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=200 200w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=228 228w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=260 260w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=296 296w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=338 338w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=385 385w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=439 439w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=500 500w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=571 571w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=650 650w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=741 741w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=845 845w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=964 964w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=1098 1098w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=1252 1252w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=1428 1428w,https://web-dev.imgix.net/image/admin/b7xYRsSdNhWX5Lc8zE51.png?auto=format&amp;w=1600 1600w"></p><p>Just like before, a significant reduction in bundle size!</p><h2 id="conclusion"><span id="Conclusion">Conclusion <a href="#conclusion" class="w-headline-link">#</a></span></h2><p>This codelab covered the process of minifying and compressing source code. Both these techniques are becoming a default in many of the tools available today, so it‚Äôs important to find out whether your toolchain already supports them or if you should begin applying both processes yourself.</p><nav class="w-article-navigation"><a href="https://sadewadee.pages.dev/reduce-network-payloads-using-text-compression" class="gc-analytics-event w-article-navigation__link w-article-navigation__link--back w-article-navigation__link--single" data-category="web.dev" data-label="navigation, go back" data-action="click">Return to article</a></nav></div><div class="clear"></div></div><div style="clear:both"></div></div></div></div><div class="col-md-4"><div class="row"><div id="sidebar" class="col-md-12"><div class="sidebar-box"><div class="widget-box"><header class="title"><div class="line"><h3>Calendar</h3></div></header><div id="calendar_wrap" class="calendar_wrap"><table id="wp-calendar" class="wp-calendar-table"><caption>November 2021</caption><thead><tr><th scope="col" title="Monday">M</th><th scope="col" title="Tuesday">T</th><th scope="col" title="Wednesday">W</th><th scope="col" title="Thursday">T</th><th scope="col" title="Friday">F</th><th scope="col" title="Saturday">S</th><th scope="col" title="Sunday">S</th></tr></thead><tbody><tr><td><a href="https://sadewadee.pages.dev/en/2021/11/01/" aria-label="Posts published on November 1, 2021">1</a></td><td><a href="https://sadewadee.pages.dev/en/2021/11/02/" aria-label="Posts published on November 2, 2021">2</a></td><td><a href="https://sadewadee.pages.dev/en/2021/11/03/" aria-label="Posts published on November 3, 2021">3</a></td><td id="today"><a href="https://sadewadee.pages.dev/en/2021/11/04/" aria-label="Posts published on November 4, 2021">4</a></td><td>5</td><td>6</td><td>7</td></tr><tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr><tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr><tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr><tr><td>29</td><td>30</td><td class="pad" colspan="5">¬†</td></tr></tbody></table><nav aria-label="Previous and next months" class="wp-calendar-nav"> <span class="wp-calendar-nav-prev"><a href="https://sadewadee.pages.dev/en/2021/10/">¬´ Oct</a></span> <span class="pad">¬†</span> <span class="wp-calendar-nav-next">¬†</span></nav></div></div><div class="widget-box"><header class="title"><div class="line"><h3>Archives</h3></div></header><ul><li><a href="https://sadewadee.pages.dev/en/2021/11/">November 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/10/">October 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/08/">August 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/07/">July 2021</a></li><li><a href="https://sadewadee.pages.dev/en/2021/06/">June 2021</a></li></ul></div><div class="widget-box"><header class="title"><div class="line"><h3>Categories</h3></div></header><ul><li class="cat-item cat-item-18"><a href="https://sadewadee.pages.dev/en/category/improve-article/">Improve article</a></li><li class="cat-item cat-item-19"><a href="https://sadewadee.pages.dev/en/category/performance/">Performance</a></li><li class="cat-item cat-item-16"><a href="https://sadewadee.pages.dev/en/category/tech/">Tech</a></li><li class="cat-item cat-item-1"><a href="https://sadewadee.pages.dev/en/category/uncategorized/">Uncategorized</a></li><li class="cat-item cat-item-21"><a href="https://sadewadee.pages.dev/en/category/wordpress/">Wordpress</a></li></ul></div></div></div></div></div><div class="clear"></div></div></div><footer id="footer"><div class="container"><div class="row copyright"><div class="col-md-6"><p> Copyright Dev Tech 2021                                                | By <a href="https://www.themeinprogress.com/" target="_blank">Theme in Progress</a> | <a href="http://wordpress.org/" title="A Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress</a></p></div><div class="col-md-6"><div class="socials"></div></div></div></div></footer></div><div id="trp-floater-ls" onclick="" data-no-translation class="trp-language-switcher-container trp-floater-ls-names trp-bottom-right trp-color-dark"><div id="trp-floater-ls-current-language" class="trp-with-flags"> <a href="#" class="trp-floater-ls-disabled-language trp-ls-disabled-language" onclick="event.preventDefault()"> <img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/en_US.png" width="18" height="12" alt="en_US" title="English">English </a></div><div id="trp-floater-ls-language-list" class="trp-with-flags"><div class="trp-language-wrap"> <a href="https://sadewadee.pages.dev/id/minify-and-compress-network-payloads-with-gzip/" title="Indonesian"> <img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/id_ID.png" width="18" height="12" alt="id_ID" title="Indonesian">Indonesian </a> <a href="#" class="trp-floater-ls-disabled-language trp-ls-disabled-language" onclick="event.preventDefault()"><img class="trp-flag-image" src="https://sadewadee.pages.dev/contents/plugins/translatepress-multilingual/assets/images/flags/en_US.png" width="18" height="12" alt="en_US" title="English">English</a></div></div></div> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/dist/vendor/regenerator-runtime.min.js?ver=0.13.7" id="regenerator-runtime-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/dist/vendor/wp-polyfill.min.js?ver=3.15.0" id="wp-polyfill-js"></script> <script type="text/javascript" id="contact-form-7-js-extra">var wpcf7 = {"api":{"root":"https:\/\/sadewadee.pages.dev\/en\/wp-json\/","namespace":"contact-form-7\/v1"},"cached":"1"};</script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/contact-form-7/includes/js/index.js?ver=5.4.2" id="contact-form-7-js"></script> <script type="text/javascript" id="toc-front-js-extra">var tocplus = {"smooth_scroll":"1","visibility_show":"show","visibility_hide":"hide","visibility_hide_by_default":"1","width":"Auto"};</script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/plugins/table-of-contents-plus/front.min.js?ver=2106" id="toc-front-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.easing.js?ver=1.3" id="jquery-easing-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.tinynav.js?ver=1.1" id="jquery-tinynav-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/jquery.tipsy.js?ver=1.0.0a" id="jquery-tipsy-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/prettyPhoto.js?ver=3.1.4" id="prettyPhoto-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/imagesloaded.min.js?ver=4.1.4" id="imagesloaded-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/inc/js/masonry.min.js?ver=4.2.2" id="masonry-js"></script> <script type="text/javascript" src="https://sadewadee.pages.dev/contents/ui/tema/assets/js/template.js?ver=1.0.0" id="alhena-lite-template-js"></script> </body></html>
